function _(a){return a.length}var BASE=36,TMIN=1,TMAX=26,SKEW=38,DAMP=700,INITIAL_BIAS=72,INITIAL_N=128,DELIMITER="-",MAX_INT=2147483647,$S=String.fromCharCode,$P=parseInt,Punycode=function(){},A=Punycode.prototype;A._A=function(a){return _(a)?a.charCodeAt(0):0},A._P=function(a,b){var c,d="";for(c=0;c<_(b);c++)d+=b.charAt(_(b)-c);return c=d.indexOf(a),c>-1?_(d)-c:-1},A._U=function(a){return 0>a?65536+a:a},A.$DC=function(a){var b=0;return 26>a?b=a+97:36>a&&(b=a-26+48),b},A.$CD=function(a){var b=BASE;return 10>a-48?b=a-22:26>a-65?b=a-65:26>a-97&&(b=a-97),b},A.$A=function(a,b,c){var d=a,e=0;for(d=$P(c?d/DAMP:d/2),d+=$P(d/b);d>$P((BASE-TMIN)*TMAX/2);)d=$P(d/(BASE-TMIN)),e+=BASE;return e+$P((BASE-TMIN+1)*d/(d+SKEW))},A._B=function(a,b){return this._U(this._A(a))<b},A._G=function(a,b){for(var c=MAX_INT,d=0;d<_(b);d++){var e=b.charCodeAt(d);e>=a&&c>e&&(c=e)}return c},A.Encode=function(a){var b=a,c="",d=this;try{for(var e,f=INITIAL_N,g=INITIAL_BIAS,h=0,i=0;i<_(b);i++)e=b.charAt(i),d._B(e,INITIAL_N)&&(c+=e,h++);_(c)<_(b)&&_(c)>0&&(c+=DELIMITER);for(var j=h,l=0;j<_(b);){var m=d._G(f,b);l+=d._U(m-f)*(j+1),f=m;for(var i=0;i<_(b);i++)if(e=b.charAt(i),d._B(e,f))l++;else if(d._U(d._A(e))==f){var n=l;for(k=BASE;k<=MAX_INT&&(k<=g+TMIN?t=TMIN:k>=g+TMAX?t=TMAX:t=k-g,!(n<t));)c+=$S(d.$DC(t+(n-t)%(BASE-t))),n=$P((n-t)/(BASE-t)),k+=BASE;c+=$S(d.$DC(n)),first=!1,j==h&&(first=!0),g=d.$A(l,j+1,first),l=0,j++}l++,f++}}catch(o){c=a}return c.toLowerCase()},A.Decode=function(a){var b=a,c="",d=this;try{var e,f=INITIAL_N,g=INITIAL_BIAS,h=0,i=d._P(DELIMITER,b);if(i>-1)for(var j=0;i>j;j++){if(e=b.charAt(j),!d._B(e,INITIAL_N))return"";c+=e}for(i++;i<b.length;){for(var k=h,l=1,m=BASE;MAX_INT>=m&&i<b.length;){if(e=b.charAt(i),i++,_2b=d.$CD(d._A(e)),_2b>=BASE||_2b>$P((MAX_INT-h)/l))return"";if(h+=_2b*l,g>=m?t=TMIN:m>=g+TMAX?t=TMAX:t=m-g,_2b<t)break;if(l>$P(MAX_INT/(BASE-t)))return"";l*=BASE-t,m+=BASE}var n=0==k;if(g=this.$A(h-k,c.length+1,n),$P(h/c.length+1)>MAX_INT-f)return"";if(f+=$P(h/(c.length+1)),h%=c.length+1,d._B($S(f),INITIAL_N))return"";c=c.substr(0,h)+$S(f)+c.substr(h),h++}}catch(o){c=a}return c},A.EncodeDomain=function(a){for(var b=a.split("."),c=0;c<_(b);c++)/[^\x00-\x7f]+/.test(b[c])&&(b[c]="xn--"+this.Encode(b[c]));return b.join(".")},A.DecodeDomain=function(a){for(var b=a.split("."),c=0;c<_(b);c++)try{/^xn--/.test(b[c])&&(b[c]=this.Decode(b[c].replace("xn--","")))}catch(d){return}return b.join(".")};var strato=strato||{};strato.namespace=function(a){var b,c=a.split("."),d=strato;for("strato"===c[0]&&(c=c.slice(1)),b=0;b<c.length;b++)"undefined"==typeof d[c[b]]&&(d[c[b]]={}),d=d[c[b]];return d},strato.namespace("strato.domainsearch"),strato.domainsearch.notepad={callbacks:[],addOnReadyFn:function(a){strato.domainsearch.notepad.callbacks.push(a)}},strato.domainsearch.searchresult={callbacks:[],addOnReadyFn:function(a){strato.domainsearch.searchresult.callbacks.push(a)}},strato.domainsearch.progressbar={progress:0,getProgress:function(){return this.progress},checkIncomingProgress:function(a){return a>100&&(a=100),a},setProgress:function(a){a=this.checkIncomingProgress(a),this.progress=a,$("#Domainsuche_rahmen > div:first-child > div:first-child > div:nth-child(2) > div:first-child").css("width",a+"%")},increaseProgress:function(a){a=this.checkIncomingProgress(a);var b=this.progress+a;this.progress=b,$("#Domainsuche_rahmen > div:first-child > div:first-child > div:nth-child(2) > div:first-child").css("width",b+"%")}},strato.namespace("strato._classes.domainsearch.Globals"),strato._classes.domainsearch.Globals=function(){"use strict";var a={con:{},_data:{},_refs:{},_stack:{},_private:{},api:{}};return a.con={log:function(a){window.console&&window.console.log(a)},error:function(a){window.console&&window.console.error(a)},warn:function(a){window.console&&window.console.warn(a)},debug:function(a){window.console&&window.console.debug(a)}},a._private={build:{notepad:{},authinfo:{}},validation:{notepad:{}},search:{},communication:{}},a._data={urls:{domain_status:"/orca/domain_name_search/get_domain_status/by_domain_name/",notepad:{add:"/notepad/add/",remove:"/notepad/remove/",tie:"/notepad/tie_content/"}},snippets:{download_sonne:'<img src="/global_static/img/download_sonne.gif" alt="" width="25" height="25" border="0" />',result:'<div class="wohoo result_{0}"><i class="icon-{1}"></i>{2}</div>',search:'<div class="search">{0}{1}</div>'},schema:{},TLDs:[],TLDs_index:{},error_texte:{err_no_tlds:"Es konnte keine Suche gestartet werden! Bitte geben Sie eine oder mehrere gewünschte TLD(s) an!"},search_stacks:!1,notepad_data:{}},a._refs={author_call_back_fn:function(){},div_domainsearch:!1},a},strato.namespace("strato._classes.domainsearch.Build"),strato._classes.domainsearch.Build=function(a){"use strict";var b=!1,c=a._data,d=a._refs,e=a._private,f={},g={},h=!0;return f={get_input_form:function(a){var b=$.extend(h,{},a),d=$('<div class="tooltipp"><div class="input_error_off_error"><i class="icon-warning"></i></div>      <div class="input_right" style="display: block;"><div class="error_layer"><i class="icon-warning"></i><div class="error_color1">'+c.error_texte.unzuleassige_eingabe+'</div><div class="error_color2"></div></div></div></div>');return $("form#order").bind("on_error",function(a,b){a=a||{};var b=b||{err:!1};if(b.err)if("err_invalid_chars"===b.err)$("form#order").trigger("on_success",[b]);else{var e=c.error_texte[b.err]||c.texte.fehler_aufgetreten+" err_ID: "+b.err;e&&$("#domain_search_long").addClass("error"),$("#tp_domainssearch").show(),d.find(".error_color2").html(e),$("#domain_search_long").parent().append(d),$(".input_error_off_error .icon-warning").bind("mouseover",function(){d.find(".error_layer").fadeIn()}).bind("mouseout",function(){d.find(".error_layer").fadeOut()}),$("#domain_search_long").parent().find(".tooltipp").show(),d.find(".error_layer").fadeIn().bind("mouseleave",function(){d.find(".error_layer").fadeOut()})}else $("form#order").trigger("on_success")}).bind("on_success",f.get_input_form_on_success(b))},get_input_text:function(){return $("input#domain_search_long")},get_input_checkbox:function(a){var b=$('<input type="checkbox" name="domain_search_tlds_normal_scope" />').attr("value",""+a).attr("id",""+a).attr("checked",!1).bind("fake_click",function(){try{var a=c.search_stacks["default"].mapping[""+this.id],b=c.search_stacks["default"].stack[a];this.checked?c.search_stacks["default"].active_search_counter++:c.search_stacks["default"].active_search_counter--,c.search_stacks["default"].active_search_counter<0&&(c.search_stacks["default"].active_search_counter=0),b.is_in_basket=!1,b.lookup=this.checked?"on":"off"}catch(d){}});return b},get_seachresult_row:function(a,b){var d=f.get_seachresult_row_domainname(),e=b.tld_name.toUpperCase(),g=$('<div data-id="'+e+'" class="seachresult search row"></div>'),h=f.get_seachresult_row_status_text(),i=f.get_seachresult_row_status().append(h);return e===c.searchTLD&&g.addClass("highlight"),g.append(d),g.append(i),g.append(f.get_seachresult_row_action().append($('<div class="search"></div>').hide(),$('<div class="result_is_in_notepad 2"><strong>'+c.texte.im_np+"</strong>&nbsp;&nbsp;</div>").hide(),$('<div class="result_is_in_notepad_kk"><strong>'+c.texte.im_np+"</strong>&nbsp;&nbsp;</div>").hide(),$('<div class="result_is_in_basket"><strong>'+c.texte.im_wk+"</strong>&nbsp;&nbsp;</div>").hide(),$('<div class="result_is_in_basket_kk"><strong>'+c.texte.im_wk+"</strong>&nbsp;&nbsp;</div>").hide(),$('<div class="result_has_char_err"></div>').hide().append(f.get_seachresult_row_action_result_has_char_err(a,b)).hide(),$('<div class="result_0"></div>').append(f.get_seachresult_row_action_result_0(a,b)).hide(),$('<div class="result_1"></div>').append(f.get_seachresult_row_action_result_1(a,b)).hide(),$('<div class="result_2"></div>').hide(),$('<div class="result_3"></div>').append(f.get_seachresult_row_action_result_3(a,b)).hide(),$('<div class="result_4"></div>').hide(),$('<div class="result_5"></div>').append(f.get_seachresult_row_action_result_5(a,b)).hide())),b.domainname&&b.domainname.length>2&&(g.find(".status .search").show(),g.find(".seachresult.domainname").html(b.domainname+"."+b.tld_name).show().data("domain",{domain_name:b.domainname.toLowerCase(),tld_name:b.tld_name.toLowerCase()})),g.hide(),b.refs.result_row=g,g},send_to_basket_action:function(a){$("#domain_search_submit").addClass("back"),$("#notepad").show();var b=this,d=a.data.KK||!1,h=a.data.search_stack_item,i=(h.refs.icon_send_to_basket,function(a){var b="";return $.each(a,function(a,c){b+="&#"+c.charCodeAt(0)+";"}),b}(""+h.domainname),!1);if(h.order_index||0===h.order_index?i=c.item_recource.stack[h.order_index]:(h.original_index||0===h.original_index)&&(i=c.item_recource.stack[h.original_index]),$.data(b,"test",$.data(b,"test")||{is_submitting:!1}),i.is_in_basket)$.data(b,"test",{is_submitting:!1}),h.refs.result_row.find("div.action span").hide(),h.refs.result_row.find("div.action span.result_is_in_basket").show(),h.refs.suggestion_row.find("div.action span").hide(),h.refs.suggestion_row.find("div.action span.result_is_in_basket").show();else if(!$.data(b,"test").is_submitting){$.data(b,"test",{is_submitting:!0});var j=function(a){a=a||{},i.refs.result_row=$(b).parentsUntil(".seachresult.row").parent(),e.communication.notepad.def_ajax({action:"add",ace_name:i.ace_name,domainname:i.domainname.toLowerCase(),tld:i.tld_name.toLowerCase(),KK:d,authcode:a.authcode||!1},function(a){if($.data(b,"test",{is_submitting:!1}),a){try{c.notepad_data.refs.div_err_authcode.hide(),$("#confirm-overlay").hide(),$("#confirm-container").hide()}catch(f){}var h=$("#notepad #notepad_Domains").html("").append($("<table></table>").append(e.build.notepad)),j=a.inclusive_domain_in_basket||[],k=a.exclusive_domain_in_basket||[],l=a.unordered_domain_in_basket||[],m={package_data:!1,domain_data:a};if(e.notepad_data_dispatcher(m)){e.build.notepad.append_domain_list(h);var n={},o=i.domainname+"."+i.tld_name,p=e.punycode_converter.EncodeDomain(""+o);n[p]=d?"is_in_notepad_kk":"is_in_notepad",i.onsuccess(n),j.length+k.length+l.length>0&&$("#notepad").show(),g.truncator();try{$.each(strato.domainsearch.notepad.callbacks,function(a,b){b()})}catch(f){console.log(f)}return!0}}else try{$("#confirm-overlay").show(),$("#confirm-container").show(),c.notepad_data.refs.div_err_authcode.html(""+c.notepad_data.error_texte.err_kkauth_code).show()}catch(f){}})()},k=function(){if(d&&e.validation.notepad.authinfo_needed(i.tld_name)){e.build.authinfo.create_authinfo_overlay({action:"add",domainname:h.domainname.toLowerCase(),tld:i.tld_name.toLowerCase(),KK:d,authcode:""},j)}else j({authcode:!1});$.data(b,"test").is_submitting=!1};1===parseInt(c.notepad_data.max_domain_count)&&c.notepad_data.incl_domains.length>0?f.create_only_one_dom_overlay({},function(a){$("#confirm-overlay").hide(),$("#confirm-container").hide(),a?k():$.data(b,"test",{is_submitting:!1})}):k()}},create_only_one_dom_form:function(a,b){var d=$("<div></div>"),e=$("<form></form>");return d.append($("<div></div>").addClass("message").html(c.texte.question_replace)),e.bind("submit",function(){return!1}).append($("<button>"+c.texte.confirm_replace+"</button>").addClass("forward").css({"float":"right",margin:"10px 25px"}).bind("click",function(){b(!0)})),d.append(e)},create_only_one_dom_overlay:function(a,b){confirm();var c=$("div#confirm-overlay"),d=$("a.modal-close"),e=$("div.simplemodal-wrap"),g=$.extend({},{});return d.bind("click",function(a){b(!1)}),$("#confirm-container").css({height:"100px"}),e.html("").append(f.create_only_one_dom_form(g,b)),c.show(),$("#confirm-container").show()},get_text_div_has_char_err:function(a){var b,d=$('<div class="info_layer"></div>'),e=""+a.allowed_special_chars;return b=e.length<1?""+c.texte.keine_sonderz_zugel:""+c.texte.beinhaltet_unzul_zeichen,d.html(function(a){return b=b.replace(/\#tld_name\#/,""+a),b+"<br>"+(e||"")}(a.tld_name)),d},get_text_div_3:function(a){var b=$('<div class="info_layer"></div>');return b.html(""+c.texte.domaininhaber_strato_info),b},get_text_div_5:function(a){var b=$('<div class="info_layer"></div>');return b.html(""+c.texte.TMCH_info),b},get_seachresult_row_action_result_has_char_errxxx:function(a,b){var c=f.get_text_div_has_char_err(b),d=$('<div data-html=true data-content="'+c+'" data-placement="top" data-toggle="popover" title="" data-original-title="" class="tooltip"><div class="icon"><i class="icon-info"></i></div></div>').popover({trigger:"hover",placement:"right"}).addClass("error");return d},get_seachresult_row_action_result_3xxx:function(a,b){var d=$('<div data-html=true data-content="'+c.texte.domaininhaber_strato_info+'" data-placement="top" data-toggle="popover" title="" data-original-title="" <div class="info" style="top: -131px; left: -489px; display: none;"></div>').popover({trigger:"hover",placement:"right"});return d},get_seachresult_row_action_result_has_char_err:function(a,b){var c=$('<div class="tooltip_info"><div class="icon"><i class="icon-info"></i></div></div>').append(this.get_text_div_has_char_err(b)).bind("mouseover",function(a){$(this).find(".info_layer").show()}).bind("mouseout",function(a){$(this).find(".info_layer").hide()});return c},get_seachresult_row_action_result_5:function(a,b){var c=$('<div class="tooltip_info"><div class="icon"><i class="icon-info"></i></div></div>').append(this.get_text_div_5(b)).bind("mouseover",function(a){$(this).find(".info_layer").show()}).bind("mouseout",function(a){$(this).find(".info_layer").hide()});return c},get_seachresult_row_action_result_3:function(a,b){var c=$('<div class="tooltip_info"><div class="icon"><i class="icon-info"></i></div></div>').append(this.get_text_div_3(b)).bind("mouseover",function(a){$(this).find(".info_layer").show()}).bind("mouseout",function(a){$(this).find(".info_layer").hide()});return c},get_seachresult_row_action_result_0:function(a,b){return $('<div class="forward"><div class="forward_text">'+c.texte.auswaehlen+'<i class="icon-cart"></i></div></div>').addClass("action_reservieren css_button_small").attr("title",""+c.texte.in_den_wk_legen).bind("click",{search_stack_item:b,KK:!1},f.send_to_basket_action)},get_seachresult_row_action_result_1:function(a,b){return $("<div></div>").addClass("action_domainumzug css_button_small no_action").attr("title",""+c.texte.bin_domaininhaber).html(""+c.texte.Domainumzug).bind("click",{search_stack_item:b,KK:!0},f.send_to_basket_action)},get_seachresult_row_domainname:function(){return $('<div class="seachresult domainname">&nbsp;</div>')},get_seachresult_row_status:function(){return $('<div class="seachresult status"></div>')},get_seachresult_row_action:function(){return $('<div class="seachresult action"></div>')},get_seachresult_row_status_icon:function(){return""},get_seachresult_row_status_text:function(){var a=c.snippets,b=$('<div class="seachresult status text"></div>');return b.append($(a.search.format(a.download_sonne,c.texte.wird_geprueft)).hide()),b.append($(a.result.format("0","checkmark-circle",c.texte.frei)).hide()),b.append($(a.result.format("is_in_notepad 1","checkmark-circle",c.texte.frei)).hide()),b.append($(a.result.format("is_in_notepad_kk","cross",c.texte.belegt)).hide()),b.append($(a.result.format("is_in_basket","checkmark-circle",c.texte.frei)).hide()),b.append($(a.result.format("is_in_basket_kk","cross",c.texte.belegt)).hide()),b.append($(a.result.format("has_char_err","warning",c.texte.unzulaessige_zeichen)).hide()),b.append($(a.result.format("1","cross",c.texte.belegt)).hide()),b.append($(a.result.format("2","minus-alt",c.texte.nicht_verfuegbar)).hide()),b.append($(a.result.format("3","cross",c.texte.liegt_bei_strato)).hide()),b.append($(a.result.format("4","minus-alt",c.texte.nicht_ermittelbar)).hide()),b.append($(a.result.format("5","cross",c.texte.nicht_registrierbar)).hide()),b},form_on_success_prepare_view:function(){d.domainname.unbind("mouseover").unbind("mouseout").removeClass("error"),d.domainname.parent().find(".tooltipp").hide(),d.toggle_area.first().click(),d.suggestions.find(".seachresult.row").remove(),d.seachresult.find(".seachresult.row").remove(),d.more_suggestions.hide(),d.result_container.show(),d.suggestions_result.show(),d.chosen_search_started.hide(),d.alternative_search_started.hide(),d.div_suggestions_timed_out.hide(),d.alternative_search_started.hide(),d.no_result_possible.hide(),d.chosen_search_started.show(),d.suggestions_headline.show(),d.seachresult.show()},form_on_success_setup_view:function(a){var a=a||{},b={};"faild"===a.has_char_err?(a.lookup="off",a.refs.result_row.addClass("has_char_err"),b[a.ace_name+"."+a.tld_name]="has_char_err",a.onsuccess(b)):(a.is_in_notepad?(b[a.ace_name+"."+a.tld_name]=a.is_in_notepad,a.onsuccess(b)):a.is_in_basket&&(b[a.ace_name+"."+a.tld_name]=a.is_in_basket,a.onsuccess(b)),b[a.ace_name+"."+a.tld_name]&&a.onsuccess(b))},form_on_success_prepare_events:function(a){var a=a||{};d.div_suggestions_again.bind("click",function(){try{c.pointer_stacks.suggestions_aborted=!1,f.add_timer_to_result(c.suggestions_timeout)}catch(b){}d.div_suggestions_timed_out.hide(),e.search.request_dispatcher(a)}),d.more_suggestions.find(".moreLink").bind("click",function(){try{c.pointer_stacks.suggestions_aborted=!1,f.add_timer_to_result(c.suggestions_timeout)}catch(b){}e.search.request_dispatcher(a),d.more_suggestions.hide()})},update_stack_item:function(a){var b=a.search_stack_item||{},c=a.is_dummy||!1,f=a.tld_name||"no_tld",g=a.err_chars_tlds||{},h={};if(b.forced_sugg=!1,b.status=!1,b.domainname=(""+d.domainname.val().toLowerCase()).replace(/\ /,""),b.ace_name=e.punycode_converter.EncodeDomain(""+b.domainname),b.has_char_err=g[f]||!1,"function"===(typeof b.has_char_err).toLowerCase()&&(b.has_char_err=!1),b.xhr&&b.xhr.abort(),b.has_char_err)h[b.ace_name+"."+f]="has_char_err";else{b.is_in_basket=!1,b.is_in_notepad=!1;try{b.is_in_basket=e.validation.notepad.is_in_basket({ace_name:b.ace_name.toLowerCase(),tld_name:f})}catch(i){}try{b.is_in_notepad=e.validation.notepad.is_in_notepad({ace_name:b.ace_name.toLowerCase(),tld_name:f})}catch(i){}b.is_in_notepad?(b.forced_lookup=!1,h[b.ace_name+"."+f]=b.is_in_notepad):b.is_in_basket?(b.forced_lookup=!1,h[b.ace_name+"."+f]=b.is_in_basket):("on"===b.lookup||c)&&(b.lookup=c?"off":b.lookup)}return h[b.ace_name+"."+f]&&b.onsuccess(h),b},get_input_form_on_success:function(b){var i,j=$.extend(h,{},b);j.angular;return i=function(b,h){var i,h=h||[],k=g.check_for_char_err(h),l=j.angular.tlds.tlds;f.form_on_success_prepare_view(),f.form_on_success_prepare_events(j),$.each(c.search_stacks["default"].stack,function(b,c){i=c.tld_name.toUpperCase(),c=f.update_stack_item({search_stack_item:c,tld_index:b,is_dummy:l[i].checked.DUMMY===!0,tld_name:i.toLowerCase(),err_chars_tlds:k}),("on"===c.lookup||c.forced_lookup===!0)&&(d.seachresult.append(f.get_seachresult_row(b,c)),f.form_on_success_setup_view(c),a._private.build.result_domainname_truncator.check(c.refs.result_row.show().find(".seachresult.domainname")))}),d.seachresult.find(".seachresult.row").show(),e.search.merge_stacks(j),e.search.create_pointer_stacks(j),f.add_timer_to_result(c.suggestions_timeout),0===c.pointer_stacks.pending.length&&d.seachresult.find(".seachresult.row:visible").length<1?f.do_handle_empty_result(j):(d.seachresult.find(".row").is(":visible")&&(d.alternative_search_started.hide(),d.chosen_search_started.show()),e.search.reset_request_counter(),e.search.request_dispatcher(j))}},do_handle_empty_result:function(a){var g=$.extend(h,{},a),i=g.angular,j="";try{j=i.getDefault("category")}catch(k){j=i.tlds.categories[0]}return d.seachresult.find(".seachresult.row:visible").length>0?!1:d.alternative_search_started.is(":visible")||i.selected.id===j?(d.seachresult.find(".seachresult.row:visible").length<1&&(d.alternative_search_started.hide(),d.chosen_search_started.hide(),d.suggestions_headline.hide(),d.no_result_possible.show()),!1):(c.pointer_stacks.tmch.length<1&&(d.seachresult.hide(),d.alternative_search_started.show(),d.chosen_search_started.hide(),d.suggestions_headline.hide(),$.each(i.tlds.category_mapping[j].tlds,function(a,b){var d=c.search_stacks["default"].mapping[b.toUpperCase()];c.search_stacks["default"].stack[d].lookup="sugg",c.search_stacks["default"].stack[d].forced_sugg=!0})),e.search.merge_stacks(g),e.search.create_pointer_stacks(g),c.pointer_stacks.pending_suggestions=c.pointer_stacks.pending.length,b?d.form.trigger("QUNIT_on_success",[send_triggert]):f.add_timer_to_result(c.suggestions_timeout),e.search.reset_request_counter(),e.search.request_dispatcher(g),!0)},hide_suggestions_timer:function(){d.div_suggestions_timer.hide();try{$.each(strato.domainsearch.searchresult.callbacks,function(a,b){b()})}catch(a){console.log(a)}},add_timer_to_result:function(a){$("#domain_search_long").popover("destroy"),a=a||c.suggestions_timeout||5,c.pointer_stacks.pending_suggestions>0?(d.suggestions.show(),function e(){d.suggestions_timer.html(""+a),d.div_suggestions_timer.show(),setTimeout(function(){a-->1?e():(c.pointer_stacks.on_suggestions_finished(),f.hide_suggestions_timer())},function(a){return a?1:1e3}(b))}(),d.suggestions.show()):(d.suggestions.hide(),f.hide_suggestions_timer(),d.suggestions.find("div").html(""))}},storefront.globals.feature_toggles&&storefront.globals.feature_toggles.classic_ordering&&(f.send_to_basket_action=function(a){var b=this,e=a.data.search_stack_item,f=(e.refs.icon_send_to_basket,!1),g=function(a){var b="";return $.each(a,function(a,c){b+="&#"+c.charCodeAt(0)+";"}),b}(""+e.domainname);$("#no_domain_needed_banner_unless").hide(),e.order_index||0===e.order_index?f=c.item_recource.stack[e.order_index]:(e.original_index||0===e.original_index)&&(f=c.item_recource.stack[e.original_index]),$.data(b,"test",$.data(b,"test")||{is_submitting:!1}),f.is_in_basket?($.data(b,"test",{is_submitting:!1}),e.refs.result_row.find("div.action span").hide(),e.refs.result_row.find("div.action span.result_is_in_basket").show(),e.refs.suggestion_row.find("div.action span").hide(),e.refs.suggestion_row.find("div.action span.result_is_in_basket").show()):$.data(b,"test").is_submitting||($.data(b,"test",{is_submitting:!0}),storefront.ordering.utils.Main.warenkorb.neu.domains().add([{fc_domainname:""+e.domainname,domainname:""+g,ace_name:""+f.ace_name+"."+f.tld_name,tld_name:""+f.tld_name,tld:"."+f.tld_name,KKable:1===f.status?1:0,available:function(){return 0===f.status?1:1===f.status?1:0}(),moveable:1===f.status?1:0,selected:1,name:g+"."+f.tld_name}],function(a,c){var c=c||{},e=storefront.ordering.utils.Main.warenkorb.additional_action||function(){};if(c.only_one_domain)d.next_step1.trigger("click");else{d.next_step1.show(),d.next_step2.show(),$("#next_step1").removeAttr("disabled"),$("#next_step2").removeAttr("disabled");try{f.refs.result_row.find(">div:nth-child(3)>div").hide(),f.refs.result_row.find("div.action div.result_is_in_basket").show(),f.refs.suggestion_row.find(">div:nth-child(3)>div").hide(),f.refs.suggestion_row.find("div.action div.result_is_in_basket").show(),f.is_in_basket=!0}catch(g){}$.data(b,"test",{is_submitting:!1}),e()}}))}),g={handle_empty_result:function(a){f.do_handle_empty_result(a)},truncator:function(){var a={domain:{to_long:function(a,b){var b=b||!1;if(a.parent().parent().find("td").show(),b)return a.innerWidth()>b.innerWidth()?!0:!1;a.append('<span class="calculate">'+a.html()+"</span>");var c=a.find("span").innerWidth(),d=a.parent().innerWidth();return a.find("span").remove(),c>d-20?!0:!1},truncate:function(a,b,c){var d,e,c=c||"[...]",f=""+a.html(),g=new RegExp(b+"$"),f=f.replace(g,"");for(a.html(""),d=f.length-1;d>0;d--)e=f.substring(0,d),e=c?e+c:e,e=b?e+" ."+b:e,a.html(e),this.to_long(a)||(d=-1)}},authcode:{to_long:function(b){return a.domain.to_long(b)},truncate:function(b,c,d){a.domain.truncate(b,c,d)}},single:function(a,b,c){if(this.domain.to_long(a,b)){var d,e,f="[...]",c=c||"no_tld",g=""+a.html(),h=new RegExp(""+c),g=g.replace(h,"");for(a.html(""),d=g.length-1;d>0;d--)e=g.substring(0,d),e=f?e+f:e,e=c?e+" ."+c:e,a.html(e),this.domain.to_long(a,b)||(d=-1)}},all:function(){var a;for($("#notepad_Domains td").hide(),d.truncator=d.truncator||[],a=0;a<d.truncator.length;a++){var b=d.truncator[a];this[b.type].to_long(b.ref)&&this[b.type].truncate(b.ref,b.to_keep,b.replacement),$("#notepad .authcode").show(),$("#notepad").show()}d.truncator=[]}};return function(b,c,d){b=b||!1,b?a.single(b,c,d):a.all()}}(),get_suggestion_row:function(a){var b=a.tld_name.toUpperCase(),d=$('<div data-id="'+b+'" class="seachresult sugg row"></div>').append('<div class="seachresult domainname"></div>').append(f.get_seachresult_row_status().append(f.get_seachresult_row_status_text())).append(f.get_seachresult_row_action().append($('<div class="result_0" style="display:inline;"></div>').append(f.get_seachresult_row_action_result_0(a.original_index,a)).show(),$('<div class="result_is_in_basket"><strong>'+c.texte.im_wk+"</strong>&nbsp;&nbsp;</div>").hide(),$('<div class="result_is_in_notepad 3"><strong>'+c.texte.im_np+"</strong>&nbsp;&nbsp;</div>").hide()));return d},potentially_search_result:function(){return""},check_for_char_err:function(a){var b={};return a.err_use_cases&&$.each(a.err_use_cases,function(a,c){if("TLD"===c[0])if("eq"===c[1])b[""+c[2].toLowerCase()]="faild";else{var d=""+c[2],e=[];d=d.substring(1,d.length-1),e=d.split("|"),$.each(e,function(a,c){b[""+c.toLowerCase()]="faild"})}}),b},tld_array:function(a){var b=$.extend(h,{},a);b.config=b.config||{};var f=(b.config.shown_row_max||2,b.config.collum_max||6,!1);d.TLD_array=$("#TLD_array").hide(),1===c.TLDs.length&&(f=!0),c.search_stacks["default"].mapping=c.search_stacks["default"].mapping||{},c.search_stacks.suggestions.mapping=c.search_stacks["default"].mapping,$(window).bind("update_category",function(b,d){var e=d.tlds,f=d.id;$.each(c.search_stacks,function(b,d){c.search_stacks["default"].active_search_counter=0,$.each(d.stack,function(b,c){var g=c.tld_name.toUpperCase(),h=a.angular.tlds.tlds[g];e.indexOf(g)>-1?h.checked[f]?(c.search_stack="default",c.lookup=h.checked[f]?"on":"off","default"===b&&d.active_search_counter++):(c.search_stack="suggestions",c.lookup="off"):(c.search_stack="",c.lookup="off")})})}),$(window).bind("update_checked",function(b,d,e){var f=a.angular.tlds.tlds[d],g=c.search_stacks["default"].mapping[""+d],h=c.search_stacks["default"].stack[g];f.checked[e]?c.search_stacks["default"].active_search_counter++:c.search_stacks["default"].active_search_counter--,c.search_stacks["default"].active_search_counter<0&&(c.search_stacks["default"].active_search_counter=0),h.is_in_basket=!1,h.lookup=f.checked[e]?"on":"off"}),$.each(c.TLDs,function(b,d){var f=d.tld_name&&d.tld_name.toLowerCase()||"xxx";c.search_stacks["default"].stack[b]=new e.search.create_search_stack_item({search_stack:"default",tld_name:f,domainname:"",order_index:b,timeout:c.timeout||!1},a),c.search_stacks.suggestions.stack[b]=new e.search.create_search_stack_item({search_stack:"suggestions",tld_name:f,domainname:"",order_index:b,timeout:c.timeout||!1},a)}),f&&$.each(c.TLDs,function(a,b){c.search_stacks["default"].stack[a].lookup="on"}),a.angular.has_stack=!0;var g=a.angular.selected.id;g&&$.each(a.angular.tlds.tlds,function(a,b){b.checked[g]&&$(window).trigger("update_checked",[a,g])}),d.top_five_tlds=$(".top_five").bind("click",function(){var a=$(this).prev();a.attr("checked",!0),a.checked===!1&&d.top_five.attr("checked",!1)}),d.top_five.bind("click",function(){var a=this.checked===!0;d.top_five_tlds.attr("checked",a).trigger("click").attr("checked",a)}),c.TLDs.length<5?d.tld_display.show():d.TLD_array.show()},refs:function(a){var c=$.extend(h,{},a);d.next_step1=$("#next_step1").hide(),d.next_step2=$("#next_step2").hide(),d.Domainsuche_page=$("#Domainsuche_page").hide(),d.Domainsuche_rahmen=$("#Domainsuche_rahmen"),d.jq_loader=$("#jq_loader"),d.top_five=$("#top_five"),d.domainname=$("#domain_search_long"),d.tld_display=$("#tld_display").hide(),d.result_container=$("#result_container_css").hide(),d.suggestions_result=$("#suggestions_result").hide(),d.seachresult=$("#seachresult"),d.suggestions=$("#suggestions"),d.div_suggestions_timer=$("#div_suggestions_timer"),d.suggestions_timer=$("#suggestions_timer"),d.div_suggestions_timed_out=$("#div_suggestions_timed_out").hide(),d.div_suggestions_again=$('<div class="action_domainumzug css_button_small" id="suggestions_again" ><a class="moreLink more_suggestions">'+c.angular.texte.Domainsuche.result.more_sugg+'<i class="icon-arrow-right"></i></a></div>').hide(),d.more_suggestions=$("#more_suggestions").hide(),d.notepad=$("#notepad").html(""),d.div_suggestions_timed_out.append(d.div_suggestions_again),d.chosen_search_started=$("#chosen_search_started"),d.alternative_search_started=$("#alternative_search_started"),d.no_result_possible=$("#no_result_possible"),d.suggestions_headline=$("#suggestions_headline"),d.toggle_area=$("toggle_area"),b||(d.form=f.get_input_form(c),d.domainname=f.get_input_text())},result_domainname_truncator:{substitute:"[...]",check:function(a){var b=this;return $.each(a,function(a,c){b.main($(c))}),!0},main:function(a){if(a)try{var b=a.data("domain");if(void 0!==b){var c=$("<span></span>");c.css({"white-space":"nowrap"}).html(b.domain_name+"."+b.tld_name).show(),a.html("").append(c).show();var d=a.find("span");d.innerWidth()>a.innerWidth()&&this.fill_in(a,d)}}catch(e){}return!0},fill_in:function(a,b){var c,d="",e="",f=""+a.data("domain").tld_name,g=""+a.data("domain").domain_name;b.css({"white-space":"nowrap"}).html("");for(c in g){if(!(b.innerWidth()<a.innerWidth())){b.html(d+this.substitute+"&nbsp;."+f);break}d=""+e,e=d+g[c],b.html(e+this.substitute+"&nbsp;."+f)}this.add_layer(a,b,g,f)},add_layer:function(a,b,c,d){var e=c+"."+d;b.attr("data-html",!0).attr("data-content",e).attr("data-placement","top").attr("data-toggle","popover").popover({trigger:"hover",placement:"bottom"})},special:{de_eu_check:function(){$("input#DE").attr("checked",!0).trigger("click").attr("checked",!0),$("input#EU").attr("checked",!0).trigger("click").attr("checked",!0)},de_eu_bundle:function(a){var b=$("#special_banner");a=a||"","DE"===a.toUpperCase()?(b.removeClass("none"),b.addClass("DE_EU_Bundle_DE")):"EU"===a.toUpperCase()&&(b.removeClass("none"),b.addClass("DE_EU_Bundle_EU"))}}}}},strato.namespace("strato._classes.domainsearch.Validation"),strato._classes.domainsearch.Validation=function(a){"use strict";var b=!1,c=a._data,d=a._refs,e=a._stack,f=a.con,g={},h={},i=!0;return g={use_case_interpreter:function(a){if(e.TLD=e.mapping,a)if("string"==typeof a||"undefined"==typeof a.length)f.error("Domainauswahl . _private . validation . use_case_interpreter: 'usecase' muss ein ARRAY sein");else{if(""+a[0]=="always"||e[""+a[0]]){var b=!1,c=!1,d=a[1]||"unknown";switch(d){case"eq":$.each(e[""+a[0]],function(c,d){e.stack[d]&&"on"===e.stack[d].lookup&&""+c==""+a[2]&&(b=!0)});break;case"match":$.each(e[""+a[0]],function(c,d){e.stack[d]&&"on"===e.stack[d].lookup&&(""+c).match(RegExp("^"+a[2]+"$","i"))&&(b=!0)});break;case"no_match":$.each(e[""+a[0]],function(b,d){e.stack[d]&&"on"===e.stack[d].lookup&&(""+b).match(RegExp("^"+a[2]+"$","i"))&&(c=!0)}),b=!c;break;default:"always"===a[0]?b=!0:f.error("Domainauswahl . _private . validation . use_case_interpreter: '"+a[1]+"' kann nicht verarbeitet werden!")}return b}f.error("Domainauswahl . _private . validation . use_case_interpreter: '"+a[0]+"' muss im '_stack' zu finden sein")}else f.error("Domainauswahl . _private . validation . use_case_interpreter: Ohne 'usecase' als ARRAY kann nichts entscheiden")},validation_methodes:[{validatin_name:"optional",val_methode:function(a,b){var c=(""+b).replace(/\ /,"");return c.length>0}},{validatin_name:"minlength",val_methode:function(a,b){return b.length>a-1?!0:!1}},{validatin_name:"maxlength",val_methode:function(a,b,c){var d=0,f="";return $.each(e.TLD,function(h,i){f=b+"."+h;var j=g.punycode_converter.EncodeDomain(""+f);e.stack[i]&&(e.stack[i].mustnot_be_sugg=!1,j.length>a&&(j.length>f.length&&!(""+c.id).match(/err_ace_/)&&(c.id=(""+c.id).replace(/err_/,"err_ace_")),"on"===e.stack[i].lookup?d++:e.stack[i].mustnot_be_sugg=!0));
}),d>0?!1:!0}},{validatin_name:"pattern",val_methode:function(a,b){return(""+b).match(RegExp(""+a,"i"))?!0:!1}}],validate_value_against_schema_item:function(a,b){var c=!1,d={},e=!0,c=!1,h=(b.err_id||!1,b.use_case||!1,{});return $.each(g.validation_methodes,function(a,b){h[""+b.validatin_name]={val_methode:b.val_methode}}),$.each(b,function(g,i){if("err_id"!==g&&"use_case"!==g&&!d.err){if(h[""+g]){h[""+g].err_id=b.err_id||!1,h[""+g].use_case=b.use_case||!1;var j={id:""+b.err_id};e=h[""+g].val_methode(i,a,j),e||(d.err=""+j.id)}else"comment"!=g&&f.error("Domainauswahl . _private . validation . validate_value_against_schema_item: die Pruefmethode '"+g+"' ist nicht vorgesehen!");c=!0}}),c?d:void f.error("Auf '"+a+"' konnte keine schema-validierung angewandt werden.")},check_against_schema:function(){var a=!1,b=0;$.each(e.stack,function(a,c){c&&"on"===c.lookup&&b++});var f,h=""+d.domainname.val(),i={},j=[],k=new RegExp(" ","ig");return h=h.replace(k,""),h=h.toLowerCase(),d.domainname.val(h),f=h+".",(""+h).match(/[<>\[\]\(\)\@\€\^\°\ \!\§\$\%\&\/=\?\`\´\*\+\~\#\'\,\;\.\:\_\|\*\\µ\²\³\•]/)?a={err:"err_invalid_dname"}:($.each(c.schema.domainname,function(a,b){if(!i.err)if(b.use_case){if(g.use_case_interpreter(b.use_case))i=g.validate_value_against_schema_item(h,b);else{var c=g.validate_value_against_schema_item(h,b);c.err&&"err_invalid_chars"===c.err&&j.push(b.use_case)}i.err&&"err_invalid_chars"===i.err&&(j.push(b.use_case),i.err=!1)}else i=g.validate_value_against_schema_item(h,b)}),j.length>0?(i={err:"err_invalid_chars",err_use_cases:j},a=i):i.err&&(a=i),a)},collect_lookupstate_from_DOM:function(){e=e||{}}},h={add_agains_schema_to_form:function(a,h,j,k,l){var m,n,o=$.extend(i,{},l),p=o.angular;if(a||h||j)if(a&&h&&j)if(a&&!a.properties)f.error("Domainauswahl::validation::add_agains_schema_to_form: Im 'schema' muss das Objekt namens 'properties' enthalten sein!");else if(a.properties&&!a.properties.domainname)f.error("Domainauswahl::validation::add_agains_schema_to_form: Im 'schema' muss in 'properties' ein Objekt namens 'domainname' enthalten sein!");else if("undefined"==typeof a.properties.domainname.length)f.error("Domainauswahl::validation::add_agains_schema_to_form: Das 'schema-'propertie' namens 'domainname' muss ein ARRAY sein!");else if(a.properties.domainname.length<1)f.error("Domainauswahl::validation::add_agains_schema_to_form: Das 'schema-'propertie' namens 'domainname' darf nicht leer sein!");else if("undefined"==typeof a.properties.TLD.length)f.error("Domainauswahl::validation::add_agains_schema_to_form: Das 'schema-'propertie' namens 'TLD' muss ein ARRAY sein!");else if(a.properties.TLD.length<1)f.error("Domainauswahl::validation::add_agains_schema_to_form: Das 'schema-'propertie' namens 'TLD' darf nicht leer sein!");else if(h.domainname){if(c.schema=a.properties,d=h,e=j,k=k||!1,!b)try{g.punycode_converter=new Punycode,$.each(c.schema.CHECK_TMCH[0]["enum"],function(a,b){m=e.mapping[b],e.stack[m]&&(e.stack[m].tmch_status="required")});var q=k.build.get_domain(s,o),r=!1,s=d.domainname.val();o.pre_set_data&&s===o.pre_set_data.domainname?r=q:s?r=q:o.pre_set_data&&(r=k.build.get_domain(o.pre_set_data.domainname,o));r&&r.tld?r.tld.toUpperCase():!1;o.angular.pre_selected&&!o.angular.first_load[o.angular.pre_selected]&&$.each(o.angular.tlds.category_mapping[o.angular.pre_selected].tlds,function(a,b){if(a<o.angular.default_values.selected){if(!o.angular.tlds.tlds[b].checked[o.angular.pre_selected]){o.angular.tlds.tlds[b].checked[o.angular.pre_selected]=!0,o.angular.tlds.tlds[b].checked.DUMMY&&(o.angular.tlds.tlds[b].checked.DUMMY=!1);var c=e.mapping[b.toUpperCase()];e.stack[c].forced_lookup=!0,$(window).trigger("update_checked",[b,o.angular.pre_selected]),o.angular.first_load[o.angular.pre_selected]=!0}}else o.angular.$apply()}),d.form.bind("submit",function(){var a=!0,b=-1;if($.each(e.stack,function(a,c){n=c.tld_name.toUpperCase(),m=e.mapping[n],b=$.inArray(n,p.selected.tlds),0>b&&(e.stack[m].mustnot_be_sugg=!0),$("#checkbox_tld_"+n+":checked").length>0&&(c.lookup="on")}),k){var c=d.domainname.val();k.build.pre_set_tlds(o,c)}try{a=g.check_against_schema()}catch(f){console.log("e: "+f)}if(a)d.form.trigger("on_error",a);else try{d.form.trigger("on_success")}catch(f){console.log(f)}return!1})}catch(t){f.error("Domainauswahl . _private . validation . add_agains_schema_to_form -> catched: "+t)}}else f.error("Domainauswahl::validation::add_agains_schema_to_form: Das 'refs' Objekt muss mindestens die Referenzierung auf das Formular-HTML-Element 'domainname' enthalten!");else f.error("Domainauswahl::validation::add_agains_schema_to_form: Es muessen 'schema' UND 'refs' UND 'stack' bereitgestellt werden, damit Validierungs-Methoden gebaut werden koennen!");else f.error("Domainauswahl::validation::add_agains_schema_to_form: Ohne 'schema', 'refs' und 'stack' koennen keine Validierungs-Methoden gebaut werden!")}}},strato.namespace("strato._classes.domainsearch.Search"),strato._classes.domainsearch.Search=function(a){"use strict";var b=!1,c=a._data,d=a._refs,e=(a._stack,a._private),f=a.con,g={},h=!0;return g={def_onsuccess:function(a,b){var d=$.extend(h,{},b);try{var f=c.search_stacks[this.search_stack],g=""+this.tld_name;this.status=a[this.ace_name+"."+g],this.no_kk&&1===this.status&&(this.status=2),this.refs.result_row.find(".status.text DIV.search").hide(),this.refs.result_row.find(".status.text DIV").hide(),this.refs.result_row.find(".status.text DIV.result_"+this.status).show(),this.refs.result_row.find(".action > DIV").hide(),this.refs.result_row.find(".action > DIV.result_"+this.status).show(),this.refs.result_row.find(".action DIV.result_"+this.status).show(),this.refs.result_row.find(".action > DIV.result_"+this.status).show(),this.refs.result_row.find(".action DIV.result_"+this.status).show();var i=!1;$.each(c.pointer_stacks.activ,function(a,b){g===b.tld_name&&(i=a)}),(i||0===i)&&e.search.request_dispatcher(i,d),f.active_search_counter-1<f.succes_counter+f.error_counter&&(f.succes_counter=0,f.error_counter=0,f.onfinished())}catch(j){}},suggestions_onfinished:function(){var a=c.search_stacks.suggestions.stack,b=c.search_stacks.suggestions.refs.suggestions;c.search_stacks.suggestions.refs.time_out_no_result_button=c.search_stacks.suggestions.refs.div_suggestions_timed_out.find("#time_out_no_result_button"),c.search_stacks.suggestions.refs.time_out_no_result_button.bind("click",5,e.more_suggestions),c.search_stacks.suggestions.refs.more_suggestions.hide(),c.search_stacks.suggestions.refs.more_suggestions.find("a").bind("click",0,e.more_suggestions),c.search_stacks.suggestions.refs.div_suggestions_timed_out.hide(),$.each(a,function(a,d){d.status=d.status.statusTfext||d.status,d.status!==!1&&0===d.status&&(d.refs.suggestion_row.find(".status.text DIV.search").hide(),d.refs.suggestion_row.find(".status.text DIV.result_"+d.status).show(),d.refs.suggestion_row.find(".action DIV.result_"+d.status).show(),d.refs.suggestion_row.show(),b.append(d.refs.suggestion_row),c.search_stacks.suggestions.suggestions_made++)}),c.search_stacks.suggestions.suggestions_left=c.search_stacks.suggestions.potential_suggestions-c.search_stacks.suggestions.suggestions_made,c.search_stacks.suggestions.potential_suggestions>0&&c.search_stacks.suggestions.suggestions_made<1&&c.search_stacks.suggestions.refs.div_suggestions_timed_out.show(),suggestions_debug_info.append($("<div></div>").html("<br />M&ouml;gliche Vorschl&auml;ge waren: "+c.search_stacks.suggestions.potential_suggestions+"<br />Davon vorgeschlagen: "+c.search_stacks.suggestions.suggestions_made)),c.search_stacks.suggestions.suggestions_left>0?c.search_stacks.suggestions.suggestions_made>0?suggestions_debug_info.append($("<div></div>").html("Es k&ouml;nnen noch").append($("<span>&nbsp;<u>"+c.search_stacks.suggestions.suggestions_left+"&nbsp;weitere Vorschl&auml;ge</u></span>").bind("click",e.more_suggestions)).append($("<span>&nbsp;gemacht werden.<br /></span>"))):suggestions_debug_info.append($("<div></div>").html("Es kann nochmal versucht werden, die").append($("<span>&nbsp;<u>"+c.search_stacks.suggestions.suggestions_left+"&nbsp;Vorschl&auml;ge</u></span>").bind("click",5,e.more_suggestions)).append($("<span>&nbsp;zu machen.<br /></span>"))):suggestions_debug_info.append($("<div></div>").html("Es k&ouml;nnen KEINE weitere Vorschl&auml;ge gemacht werden"))},more_suggestions:function(a){var b=$("#suggestions_debug_info"),d=a.data||!1;b.html("").append($("<div></div>").html("more_suggestions:<br />TimeOut: "+(d?"+ "+d+" sec. = "+(c.suggestions_timeout+d)+" sec.":"mit "+c.suggestions_timeout+" sec. timeout")))},def_onerror:function(a){c.search_stacks[this.search_stack];try{this.status=a,this.refs.result_row.find(".status.text DIV.search").hide(),"abort"!==this.status.statusText&&(this.refs.result_row.find(".status.text DIV.result_4").show(),this.refs.result_row.find(".action DIV.result_4").show())}catch(b){}},def_ajax:function(){return b?function(a){var a=a||{result:"",responce:{domainstatus:""}},b=this;try{"success"===a.result?this.onsuccess(a.response.domain_status):"error"===a.result?this.onerror():"complete"===a.result?this.oncomplete():this.oncomplete()}catch(c){f.error("def_ajax: "+this.domainname+"."+this.tld_name+" : catched -> "+c)}b.xhr=$.getJSON("https://www.strato.de/ordering")}:function(){try{var a=this,b=($.extend(h,{},this),a.order_index||a.original_index),d=(this.ace_name&&""!==this.ace_name?this.ace_name:c.search_stacks["default"].stack[b].ace_name)+"."+this.tld_name+"/",e="strato/DE/";e=c.mandator&&c.country?c.mandator+"/"+c.country+"/":"strato/DE/",a.xhr=$.getJSON(c.urls.domain_status+e+d).error(function(b){c.search_stacks[a.search_stack||"default"||"default"].error_counter++,a.onerror(b)}).success(function(b){c.search_stacks[a.search_stack||"default"].succes_counter++,a.onsuccess(b.domain_status)}).complete(function(a){})}catch(f){}}},set_recource_item_attributes:function(a){a.domainname=(""+d.domainname.val()).replace(/\ /,""),a.ace_name=e.punycode_converter.EncodeDomain(""+a.domainname)},get_on_suggestions_finished_fn:function(a){var b=$.extend(h,{},a);return function(){c.pointer_stacks.suggestions_aborted=!0;var a=!1,f="";try{f=b.angular.getDefault("category")}catch(g){f=b.angular.tlds.categories[0]}a=b.angular&&b.angular.selected?b.angular.selected.id:b.pre_set_data.tlds[0]||f;var h=b.initial_data.domain_data.field_info.TLD.category_mapping[a].tlds;$.each(c.pointer_stacks.activ,function(a,b){try{b.xhr&&"sugg"===b.lookup&&b.xhr.abort()}catch(c){}}),c.pointer_stacks.suggestions_made=c.pointer_stacks.suggestions_made||0,$.each(c.item_recource.stack,function(a,b){if(b){var f=b.tld_name.toUpperCase(),g=-1!==jQuery.inArray(f,h);if(b.forced_sugg&&(g=!0),b.status!==!1&&0===b.status&&"sugg"===b.lookup&&!b.shown&&g){var i=e.build.get_suggestion_row(b);i.find(".seachresult.domainname").html(b.domainname+"."+b.tld_name).data("domain",{domain_name:b.domainname,tld_name:b.tld_name}),i.find(".status.text DIV.search").hide(),i.find(".status.text DIV.result_0").show(),i.find(".action div.result_0").show(),d.suggestions.append(i),b.refs.suggestion_row=i,b.shown=!0,c.pointer_stacks.suggestions_made++,e.build.result_domainname_truncator.check(i.find(".seachresult.domainname"))}}}),c.pointer_stacks.pending_suggestions=c.pointer_stacks.pending.length;var i=0;$.each(c.pointer_stacks.pending,function(a,b){b&&"sugg"===b.lookup&&i++}),d.result_container.removeClass("with_more_suggestions"),c.pointer_stacks.suggestions_made<1?i>0?(d.div_suggestions_again.show(),d.div_suggestions_timed_out.show()):(d.more_suggestions.hide(),d.suggestions.hide()):(d.suggestions.show(),d.div_suggestions_timed_out.hide(),i>0?(d.result_container.addClass("with_more_suggestions"),d.more_suggestions.show()):d.more_suggestions.hide()),c.pointer_stacks.suggestions_made<1&&1>i&&e.build.handle_empty_result(b),"function"==typeof window.checkResult&&window.checkResult(b.angular.tests)}},request_dispatcher_counter:0,remove_item_from_active:function(a){var b=!1;if(a||0===a)c.pointer_stacks.activ.splice(a,1),b=!0;else if("object"===(typeof c.pointer_stacks.activ[0]+"").toLowerCase())if(c.pointer_stacks.special.length>0){var d=!1,e=c.pointer_stacks.activ.length-1,f=c.pointer_stacks.activ[e].original_index,d="special"===f?!0:!1;d?b=!1:(this.move_back_to_pending(f),c.pointer_stacks.activ.splice(e,1),b=!0)}else b=!1;else c.pointer_stacks.activ.splice(0,1),b=!0;return b},tmch_item_handler:function(a){var b,d,e,f,i,j,k=$.extend(h,{},a),l=c.pointer_stacks.tmch[0].tmch_status,m=c.item_recource.stack,n={};if("checking"===l);else if("claimed"===l)$.each(c.pointer_stacks.tmch,function(a,b){b&&"on"===b.lookup&&(e=m[b.original_index],n[b.ace_name+"."+b.tld_name]=5,e.onsuccess(n))}),c.pointer_stacks.tmch=[],g.append_item_to_active(k);else if("not_claimed"===l){if(d=c.pointer_stacks.tmch[0],e=m[d.original_index],f=c.pointer_stacks.tmch[0].tld_name,i=c.pointer_stacks.tmch[0].ace_name,n[i+"."+f]=d.domain_status,e.onsuccess(n),c.pointer_stacks.tmch.shift(),b=c.pointer_stacks.tmch.slice(),c.pointer_stacks.pending[0]&&"sugg"===c.pointer_stacks.pending[0].lookup||!c.pointer_stacks.pending[0])for(j=b.length-1;j>-1;j--)d=b[j],e=m[d.original_index],c.pointer_stacks.pending.unshift(e),c.pointer_stacks.tmch.splice(j,1);else for(j=b.length-1;j>-1;j--)d=b[j],d.tmch_status="not_claimed",d&&"on"===d.lookup&&(e=m[d.original_index],c.pointer_stacks.pending.unshift(e),c.pointer_stacks.tmch.splice(j,1));g.append_item_to_active(k)}},tmch_backend_interface:function(a,b){var d=$.extend(h,{},b);if(a=a||{},a.callback=a.callback||function(){},a.domain=a.domain||!1,c.urls.domain_status)if(c.mandator)if(a.domain){c.pointer_stacks.tmch[0].tmch_status="checking";var e=d.mandator&&d.country?d.mandator+"/"+d.country+"/":"strato/DE/",f=$.getJSON(c.urls.domain_status+e+a.domain).success(a.callback);f.error(function(){var b={domain_status:{}};a.qt||0===a.qt?b.domain_status[a.domain]=a.qt:b.domain_status[a.domain]=5,a.callback(b)})}else a.callback({err:"err_no_domain"});else a.callback({err:"err_no_mandator"});else a.callback({err:"err_no_url"})},tmch_state_handler:function(a){var b=c.pointer_stacks.tmch[0].ace_name+"."+c.pointer_stacks.tmch[0].tld_name,d=a.domain_status[b];return c.pointer_stacks.tmch[0].domain_status=d,5===d?c.pointer_stacks.tmch[0].tmch_status="claimed":c.pointer_stacks.tmch[0].tmch_status="not_claimed",!0},tmch_interface:function(a,b){var d,e=$.extend(h,{},b),f=!1;return c.pointer_stacks.tmch.length>0&&(f=!0,d=c.pointer_stacks.tmch[0].ace_name+"."+c.pointer_stacks.tmch[0].tld_name,"required"===c.pointer_stacks.tmch[0].tmch_status&&g.tmch_backend_interface({qt:window.QUNIT?0:!1,domainname:c.pointer_stacks.tmch[0].domainname,domain:d,callback:function(a){g.tmch_state_handler(a),g.tmch_item_handler(e)}},e)),f},appending_to_active:function(a,b){var d=$.extend(h,{},b);return g.tmch_interface(d),c.pointer_stacks.activ.push(a),a.send(),c.pointer_stacks.pending.splice(0,1),!0},append_item_to_active:function(a){var b=$.extend(h,{},a),d={};return c.pointer_stacks.pending.length>0?(d=c.item_recource.stack[c.pointer_stacks.pending[0].original_index],c.pointer_stacks.suggestions_aborted&&d&&"sugg"===d.lookup?!1:g.appending_to_active(d,b)):!1},check_for_no_kk:function(a){var b=!0;try{$.each(c.schema.KKABLE[0]["enum"],function(c,d){a.toUpperCase()===d&&(b=!1)})}catch(d){b=!1}return b},reset_request_counter:function(){g.request_dispatcher_counter=0},merge_stacks:function(a){var b,d=$.extend(h,{},a),e=d.angular,f={};if(!c)throw"stack : merge_stacks : Das Object '_data' ist nicht da";c.item_recource={stack:[]},c.special_recource={stack:[]},$.each(e.selected.tlds,function(a,b){f[b]=!0}),$.each(c.search_stacks["default"].stack,function(a,d){b=c.TLDs_index[(""+d.tld_name).toUpperCase()],c.item_recource.stack[b]={original_index:b,tld_name:""+d.tld_name,lookup:d&&"on"===d.lookup?"on":"sugg",forced_lookup:d.forced_lookup||!1,no_kk:g.check_for_no_kk(""+d.tld_name),tmch_status:d.tmch_status||!1,mustnot_be_sugg:d.mustnot_be_sugg||!1,forced_sugg:d.forced_sugg||!1,is_in_basket:d.is_in_basket||!1,is_in_notepad:d.is_in_notepad||!1,has_char_err:d.has_char_err||!1,refs:d.refs||{},send:d.send||function(){},onsuccess:d.onsuccess||function(){},onerror:d.onsuccess||function(){}};var e=c.search_stacks.suggestions.stack[b];e&&"sugg"===e.lookup&&(c.item_recource.stack[b].lookup="sugg"),f[d.tld_name.toUpperCase()]||d.forced_sugg===!0||(c.item_recource.stack[b].mustnot_be_sugg=!0),e&&(e.domainname=""+d.domainname),d.forced_lookup=!1,d.tmch_status=!1,d.mustnot_be_sugg=!1,d.forced_sugg=!1,d.has_char_err=!1})},create_pointer_stacks:function(a){var b=$.extend(h,{},a);if(c.activ_max=c.activ_max||6,c)return c.pointer_stacks={activ:new Array(c.activ_max),tmch:[],pending:[],special:[]},$.each(c.item_recource.stack,function(a,b){b.forced_lookup!==!0||b.has_char_err||(b.lookup="on",b.tmch_status!==!1?c.pointer_stacks.tmch[c.pointer_stacks.tmch.length]=b:c.pointer_stacks.pending[c.pointer_stacks.pending.length]=b)}),$.each(c.item_recource.stack,function(a,b){b&&(b.tmch_status=b.tmch_status||!1,b.is_in_basket||b.is_in_notepad||(g.set_recource_item_attributes(b),"on"!==b.lookup||b.forced_lookup||b.has_char_err||(b.tmch_status!==!1?c.pointer_stacks.tmch[c.pointer_stacks.tmch.length]=b:c.pointer_stacks.pending[c.pointer_stacks.pending.length]=b)))}),c.pointer_stacks.pending_suggestions=0,c.pointer_stacks.suggestions_aborted=!1,$.each(c.item_recource.stack,function(a,b){b&&!b.mustnot_be_sugg&&(b.is_in_basket||b.is_in_notepad||"sugg"!==b.lookup||b.forced_lookup||b.has_char_err||(b.tmch_status!==!1?c.pointer_stacks.tmch[c.pointer_stacks.tmch.length]=b:c.pointer_stacks.pending[c.pointer_stacks.pending.length]=b,c.pointer_stacks.pending_suggestions++))}),void(c.pointer_stacks.on_suggestions_finished=g.get_on_suggestions_finished_fn(b));throw"stack : create_pointer_stacks : Das Object '_data' ist nicht da"},request_dispatcher:function(a,b){var d=$.extend(h,{},b),e=c.activ_max||c.pointer_stacks.pending.length||100,f=!1,i=!1;if(g.request_dispatcher_counter++,f=g.remove_item_from_active(a),!f)return void(g.request_dispatcher_counter=0);try{i=g.append_item_to_active(d)}catch(j){}return g.request_dispatcher_counter<e?void g.request_dispatcher(d):void(g.tmch_interface(d)||(g.request_dispatcher_counter=0))},create_search_stack_item:function(a){var b={},b={refs:{result_row:[]},search_stack:a.search_stack,order_index:a.order_index,tld_name:a.tld_name,domainname:a.domainname,lookup:"off",send:new g.def_ajax,status:!1,is_in_basket:!1,is_in_category:!1,is_in_notepad:!1,onsuccess:g[a.search_stack+"_onsuccess"]||g.def_onsuccess||function(){},onerror:g[a.search_stack+"_onerror"]||g.def_onerror||function(){}};return b},create_search_stack:function(a){a.search_stacks={"default":{active_search_counter:0,succes_counter:0,error_counter:0,TLDs:a.TLDs,mapping:a.TLDs_index,stack:[],onfinished:b?!1:function(){}},suggestions:{active_search_counter:0,succes_counter:0,error_counter:0,TLDs:a.TLDs,mapping:a.TLDs_index,stack:[],onfinished:b?!1:g.suggestions_onfinished}},c=a}}},strato.namespace("strato._classes.domainsearch.Main"),strato._classes.domainsearch.Main=function(globals,build,validation,search){var QUNIT=!1,con=!1,_data={},_refs={},_stack={},_private={},api={},DEEP=!0;return _private=globals._private,_data=globals._data,_refs=globals._refs,con=globals.con,$.extend(_private.build,build),$.extend(_private.validation,validation),$.extend(_private.search,search),api={equals:function(a,b){var c;for(c in b)if("undefined"==typeof a[c])return!1;for(c in b)if(b[c])switch(typeof b[c]){case"object":if(!b[c].equals(a[c]))return!1;break;case"function":if("undefined"==typeof a[c]||"equals"!=c&&b[c].toString()!=a[c].toString())return!1;break;default:if(b[c]!=a[c])return!1}else if(a[c])return!1;for(c in a)if("undefined"==typeof b[c])return!1;return!0},set_timeout:function(a){_data.suggestions_timeout=a},init:function(a){var b={initial_data:{},callback_fn:function(){},config_data:{},pre_set_data:{},package_data:{},domain_data:{},test:{}};if(1===arguments.length&&(b=$.extend(DEEP,b,a),"undefined"!=typeof b.package_data&&(_private.package_data=b.package_data),b.config_data=b.config_data||{},b.pre_set_data=b.pre_set_data||!1),b.initial_data)if(b.initial_data.domain_data)if(b.initial_data.domain_data.field_info)if(b.callback_fn)if("function"!=typeof b.callback_fn)con.error("Domainauswahl::main::init: Die 'callback_fn' muss vom Typ 'function' sein!");else{b.config_data=b.config_data||{},b.pre_set_data=b.pre_set_data||!1,_data.mandator=b.config_data.mandator||"strato",_data.country=b.config_data.country||"DE",_private.punycode_converter=new Punycode,_data.texte={},_data=$.extend(!0,_data,b.angular.texte.fallback),b.angular.texte=$.extend(b.angular.texte,_data.texte),_private.init_start(b),b.package_data.name=b.package_data.name||"",""==b.package_data.name?b.package_data.name=_data.notepad_data.texte.no_package:($("#show_paket_name").html(b.package_data.name),$("#show_paket_name_span").show())}else con.error("Domainauswahl::main::init: Ohne 'callback_fn' kann nichts zur Verarbeitung zurueckgegeben werden!");else con.error("Domainauswahl::main::init: Ohne 'field_info' in 'domain_data' kann kein Domainsuch-Formular gebaut werden!");else con.error("Domainauswahl::main::init: Ohne 'domain_data' in 'initial_data' kann kein Domainsuche gebaut werden!");else con.error("Domainauswahl::main::init: Ohne 'initial_data' kann kein Domainsuche gebaut werden!")}},(QUNIT||window.QUNIT)&&(api.get_local_objects=function(witch){return eval(witch)},api.extent_data=function(a){_data=$.extend(!0,_data,a)}),_private.init_start=function(a){var b=$.extend(DEEP,{},a);if(storefront.globals.QUNIT&&_refs.author_call_back_fn(),_private.set_defaults(b))if(_private.prepare_search_elemnts(b))if(_private.prepare_notepad_elemnts(b)){var c=!1;b.pre_set_data&&(c=_private.pre_set_controller(b),c&&_refs.form.trigger("submit")),_private.set_default_check(c,b.pre_set_data),_refs.Domainsuche_page.show(),_refs.notepad.show(),_refs.result_container_css=$("#result_container_css"),_refs.suggestions.hide(),_refs.seachresult.show(),_refs.jq_loader.hide(),_refs.Domainsuche_rahmen.fadeIn(),_private.build.truncator(),$("html, body").animate({scrollTop:$("#suggestions_result").offset().top},100),$("html, body").animate({scrollTop:$("#suggestions_result").offset().top},100),$(document).ready(function(){_private.decide_next_step_button(),b.angular&&b.angular.tests?_refs.author_call_back_fn(b.angular):_refs.author_call_back_fn()})}else _refs.author_call_back_fn(!1);else _refs.author_call_back_fn(!1);else _refs.author_call_back_fn(!1);$("#notepad").show();var d=$(".seachresult.domainname:visible");globals._private.build.result_domainname_truncator.check(d),$("#Domainsuche_rahmen>div").fadeOut()},_private.set_defaults=function(a){var b=$.extend(DEEP,{},a);try{return b.config_data=b.config_data||{},_refs.author_call_back_fn=b.callback_fn||function(){},api.set_timeout(b.config_data.suggestions_timeout||5),_data.mandator_path=b.config_data.mandator_path||"/buy/ger",_data.urls.notepad.add=_data.mandator_path+""+_data.urls.notepad.add,_data.urls.notepad.remove=_data.mandator_path+""+_data.urls.notepad.remove,_data.urls.notepad.tie=_data.mandator_path+""+_data.urls.notepad.tie,b.config_data.ORCA_URL&&(_data.urls.domain_status=location.protocol+"//"+b.config_data.ORCA_URL+_data.request_url),b.config_data.NOTEPAD_URL&&(_data.urls.notepad.remove=location.protocol+"//"+b.config_data.NOTEPAD_URL+_data.urls.notepad.add,_data.urls.notepad.remove=location.protocol+"//"+b.config_data.NOTEPAD_URL+_data.urls.notepad.remove,_data.urls.notepad.tie=location.protocol+"//"+b.config_data.NOTEPAD_URL+_data.urls.notepad.tie),!0}catch(c){con.error("Domainauswahl::main::_private::set_defaults: "+c)}return!1},_private.handle_DOMAIN_STRATO=function(a){var b,c=$.extend(DEEP,{},a),d=_data.search_stacks["default"];if(c.package_data.isDomPack=!1,c.angular.params.force_search_stack){var e=[];switch(c.angular.params.force_search_stack){case"DOMAIN_STRATO":"DOMAIN_STRATO"===c.package_data.group&&c.angular.selected.id&&(e=c.angular.getTLDList("DOMAIN_STRATO"));break;default:e=c.angular.getTLDList(c.angular.params.force_search_stack)}"object"==typeof e&&$.isArray(e)&&e.length>0&&$.each(e,function(a,e){c.angular.tlds.tlds[e].checked&&c.angular.tlds.tlds[e].checked[c.angular.selected.id]===!0&&(b=d.mapping[e],d.TLDs[b].default_selected=!0,d.stack[b].lookup="on",c.package_data.stack_index=b)})}return c},_private.prepare_search_elemnts=function(a){var b=$.extend(DEEP,{},a),c=!1;_private.search.create_search_stack(_data);try{c=_private.data_dispatcher(b)}catch(d){con.error("Domainauswahl::main::prepare_search_elemnts -> catched: "+d)}return c?(_private.build.refs(b),_private.build.tld_array(b),_private.append_allowed_chars_to_tld_items(),_private.append_default_validation_properties(),b=_private.handle_DOMAIN_STRATO(b)||b,_private.validation.add_agains_schema_to_form(_data.schema,_refs,_data.search_stacks["default"],_private,b),_refs.potentially_search_result=_private.build.potentially_search_result(),_refs.seachresult.append(_refs.potentially_search_result),_refs.all_result_domainname=$(".seachresult.domainname"),!0):(con.error("Domainauswahl::main::prepare_search_elemnts -> catched: die initial_data konnten nicht verarbeitet werden"),!1)},_private.prepare_notepad_elemnts=function(a){var b=$.extend(DEEP,{},a);try{if(_private.notepad_data_dispatcher(b))return _private.build.notepad.create(),!0;con.error("Domainauswahl::main::prepare_notepad_elemnts: Die Notepad_data konnten nicht verwendet werden")}catch(c){con.error("Domainauswahl::main::prepare_notepad_elemnts -> catched: "+c)}return!1},_private.decide_next_step_button=function(){try{var a=storefront.ordering.utils.Main.warenkorb.neu.domains().get_all("only_selected")}catch(b){}try{a.length&&a.length>0&&(_refs.next_step1.show(),_refs.next_step2.show())}catch(b){}},_private.evaluate_schema=function(a){var a=a||!1,b=0;return a&&a.properties?a.properties.TLD?a.properties.domainname?(a.properties.TLD=a.properties.TLD||{},$.each(a.properties.TLD,function(){b++}),1>b?con.error("Domainauswahl::main::_private::evaluate_schema: Mit einem 'schema' ohne Inhalt im Property 'TLD' kann kein Domainsuche gebaut werden!"):(b=0,a.properties.domainname=a.properties.domainname||{},$.each(a.properties.domainname,function(){b++}),1>b&&con.error("Domainauswahl::main::_private::evaluate_schema: Mit einem 'schema' ohne Inhalt im Property 'domainname' kann kein Domainsuche gebaut werden!"))):con.error("Domainauswahl::main::_private::evaluate_schema: Mit einem 'schema' ohne Property 'domainname' kann kein Domainsuche gebaut werden!"):con.error("Domainauswahl::main::_private::evaluate_schema: Mit einem 'schema' ohne Property 'TLD' kann kein Domainsuche gebaut werden!"):con.error("Domainauswahl::main::_private::evaluate_schema: Ohne 'schema' kann kein Domainsuche gebaut werden!"),a},_private.data_dispatcher=function(a){var b=$.extend(DEEP,{},a);if(b.config_data=b.config_data||{},b.initial_data.domain_data.field_info.domainname?b.initial_data.domain_data.field_info.TLD?b.initial_data.domain_data.field_info.TLD.field_value?"string"!=typeof b.initial_data.domain_data.field_info.TLD.field_value&&"number"!=typeof b.initial_data.domain_data.field_info.TLD.field_value.length?con.error("Domainauswahl::main::_private::data_dispatcher: 'field_value' fuer 'TLD' in 'domain_data' muss ein 'STRING' oder 'ARRAY' sein!"):"string"!=typeof b.initial_data.domain_data.field_info.TLD.field_value&&b.initial_data.domain_data.field_info.TLD.field_value.length<1&&(initial_data.domain_data.field_info.TLD.field_value=b.config_data.fallback_TLD_array||[]):con.error("Domainauswahl::main::_private::data_dispatcher: Ohne 'field_value' fuer 'TLD' in 'domain_data' kann kein Domainsuche gebaut werden!"):con.error("Domainauswahl::main::_private::data_dispatcher: Ohne 'TLD' in 'domain_data' kann keine Domainsuche gebaut werden!"):con.error("Domainauswahl::main::_private::data_dispatcher: Ohne 'domainname' in 'domain_data' kann keine Domainsuche gebaut werden!"),"string"!=typeof b.initial_data.domain_data.field_info.TLD.field_value&&b.initial_data.domain_data.field_info.TLD.field_value.length<1);else{b.initial_data.domain_data.field_info.domainname.field_value||!1;if(_stack.TLD=_stack.TLD||{},this.dispatch_TLD_infos(b),b.initial_data.domain_data.schema&&(b.initial_data.domain_data.schema[0]=b.initial_data.domain_data.schema[0]||{},"domainnamevalidation"===b.initial_data.domain_data.schema[0].id&&(_data.schema=_private.evaluate_schema(b.initial_data.domain_data.schema[0]),!_data.schema)))return!1}return!0},_private.append_allowed_chars_to_tld_items=function(){var a=$.extend(!0,{},_stack.TLD);$.each(_data.schema.properties.domainname,function(b,c){if("err_invalid_chars"==c.err_id){if(!c.use_case[2])return;var d=function(a){return a=a.replace(/\(/,""),a=a.replace(/\)/,""),a.split("|")}(""+c.use_case[2]),e=c.pattern;e=e.replace("^[",""),e=e.replace("]+$",""),e=e.replace("a-z",""),e=e.replace("A-Z",""),e=e.replace("0-9",""),e=e.replace("-",""),e=e.replace(/\\/g,"&nbsp;"),$.each(d,function(b,c){a[c]&&delete a[c];var d=_stack.TLD[""+c]||_stack.TLD[(""+c).toLowerCase()],f=!1;try{f=_data.search_stacks["default"].stack[d.index]}catch(g){}d&&f&&(f.allowed_special_chars=function(a){for(var b="",c=0;c<a.length;c++)b+=a[c],c<a.length-1&&(b+=", ");return b}(e))})}})},_private.append_default_validation_properties=function(){$.each(_data.search_stacks["default"].stack,function(a,b){a=a,"string"!=typeof b.allowed_special_chars&&(b.allowed_special_chars="",_data.schema.properties.domainname.push({pattern:"^[a-zA-Z0-9-]+$",err_id:"err_invalid_chars",use_case:["TLD","match","("+b.tld_name+")"]}))})},_private.dispatch_TLD_infos=function(a){var b=$.extend(DEEP,{},a);if(!b.initial_data)throw"dispatch_TLD_infos: Ohne 'initial_data' kann kein Domainsuche gebaut werden!";var c,d=0,e=function(a){return!1},f=-1;$.each(b.initial_data.domain_data.field_info.TLD.field_value,function(a,c){if(b.angular.tlds.tlds[c]){f++;var g=!1,h=!1,i=!1;"string"==typeof c?(g=""+c,d=a):(d++,$.each(c,function(a,b){g=""+a,h=b})),i=e(g),_data.TLDs_index[g]=f,_data.TLDs.push({index:f,tld_name:""+g,default_selected:h,categories:i}),_stack.TLD[""+g]={index:f,tld_name:""+g,on:!1,ace_name:!1,allowed_special_chars:!1,default_selected:h,categories:i}}}),1===_data.TLDs.length&&(c=_data.TLDs[0],c.default_selected=!0,_stack.TLD[""+c.tld_name].default_selected=!0)},_private.pre_set_controller=function(a){var b=$.extend(DEEP,{},a),c=b.pre_set_data.domainname||"",d=b.pre_set_data.tlds||[],e=b.pre_set_data.specials||[],f=!1;tld_data=b.angular.tlds;try{QUNIT||(_private.build.pre_set_domainname(c),_private.build.pre_set_specials(e))}catch(g){con.error("Domainauswahl::main::_private::pre_set_controller: catched -> "+g)}return c.length>0&&(d.length>0||e.length>0)&&(f=!0),f},_private.set_default_check=function(a,b,c){var a=a||!1,b=b||!1,c=c||!1;a||b?b.tlds.length<1&&_refs.top_five_tlds.filter(":first").attr("checked",!0).trigger("fake_click").attr("checked",!0):c||_refs.top_five_tlds.filter(":first").attr("checked",!0).trigger("fake_click").attr("checked",!0)},_private.notepad_data_dispatcher=function(a){var b=$.extend(DEEP,{},a),c=_data.notepad_data||{},d=b.package_data||!1,e=b.domain_data||!1;if(b.package_data||c.package_position){if(d&&(c.deliverable=d.deliverable||!1,c.package_position=d.position||1,c.package_titel=d.name||!1,c.package_price=d.price_monthly_first||!1,c.package_b_period=d.billing_period||!1,c.package_next_invoice=d.next_invoice_text||d.billing_periods||d.billing_periodes,c.max_domain_count=d.max_domain_count||0,c.incl_slots=0,c.incl_TLDs=[]),c.domains_in_basket=!1,c.has_domains=!1,c.incl_domains=[],c.excl_domains=[],c.unord_domains=[],_data.urls.notepad.add.match(/at_basket_position/)||(_data.urls.notepad.add+="at_basket_position/"+(d.position||1)+"/",_data.urls.notepad.remove+="at_basket_position/"+(d.position||1)+"/",_data.urls.notepad.tie+="at_basket_position/"+(d.position||1)+"/"),e.global_domain_list&&"string"!=typeof e.global_domain_list&&e.global_domain_list.length>0&&(c.domains_in_basket=e.global_domain_list),
c.package_price){var f=_private.build.notepad.split_number_unit(c.package_price);c.package_price=f.number,c.package_currency_code=f.unit||"EUR"}if(c.package_b_period){var f=_private.build.notepad.split_number_unit(c.package_b_period);f.unit=(f.unit||"m").toLowerCase(),parseInt(f.number,10)>1&&(f.unit=(f.unit||"m").toUpperCase()),c.package_b_period=f.number,c.package_b_period_unit=f.unit}return e&&(c.incl_slots=parseInt(e.inclusive_domains_count,10)||0,c.incl_slots>0&&(c.incl_TLDs=e.inclusive_tld_list||c.incl_TLDs),c.incl_TLDs=c.incl_TLDs.length>0?c.incl_TLDs:!1,(e.exclusive_domain_in_basket||[]).length+(e.inclusive_domain_in_basket||[]).length+(e.unordered_domain_in_basket||[]).length>0&&(c.has_domains=!0,c.incl_domains=e.inclusive_domain_in_basket,c.excl_domains=e.exclusive_domain_in_basket,c.unord_domains=e.unordered_domain_in_basket)),!0}return con.error("Domainauswahl::main::_private::notepad_data_dispatcher: Ohne 'package_data' kann keine Notiz-Zettel gebaut werden!"),!1},_private.build.pre_set_domainname=function(a){var a=a||"";_refs.domainname=$("#domain_search_long"),_refs.domainname.val(""+a)},_private.build.get_domain=function(a,b,c){var d=$.extend(DEEP,{},b),e={string:a||"",name:!1,tld:!1,on_offer:!1,stack_index:!1},c=c||_data.search_stacks["default"];if(e=$.extend(!0,e,d.angular.getDomain(e.string)),e.tld&&"number"==typeof e.tld_index&&e.tld_index>-1){_data.searchTLD=e.tld;var f=d.angular.tlds.tlds[e.tld.toUpperCase()];void 0!==f&&(e.on_offer=!0,e.stack_index=e.tld_index)}else _data.searchTLD=!1;return e},_private.build.pre_set_tlds=function(){var a=arguments[0],b=arguments[1]||!1,c=!0,d=$.extend(DEEP,{},a),e=e||_data.search_stacks["default"];try{var f=_private.build.get_domain(b,d);f.on_offer===!0&&_refs.domainname.val(f.name);var g=!1;d.pre_set_data&&b===d.pre_set_data.domainname?g=f:b?g=f:d.pre_set_data&&(g=_private.build.get_domain(d.pre_set_data.domainname,d));var h=g&&g.tld?g.tld.toUpperCase():!1;if(d.angular.pre_selected&&!d.angular.first_load[d.angular.pre_selected]&&$.each(d.angular.tlds.category_mapping[d.angular.pre_selected].tlds,function(a,b){if(a<d.angular.default_values.selected){if(h!==b){d.angular.tlds.tlds[b].checked[d.angular.pre_selected]=!0,d.angular.tlds.tlds[b].checked.DUMMY&&(d.angular.tlds.tlds[b].checked.DUMMY=!1);var f=e.mapping[b.toUpperCase()];e.stack[f].forced_lookup=!0,d.angular.timer("updated check2: "+b),$(window).trigger("update_checked",[b,d.angular.pre_selected]),d.angular.$apply(),c=!0,d.angular.first_load[d.angular.pre_selected]=!0}}else d.angular.$apply()}),$.each(d.angular.tlds.tlds,function(a,b){b.checked&&b.checked.DUMMY&&(delete b.checked.DUMMY,b.checked.DUMMY=!1)}),g&&g.on_offer){var i=g.tld.toUpperCase(),j=$("#label_tld_"+i);j.length>0&&!d.angular.tlds.tlds[i].checked[d.angular.pre_selected]?j.click():(d.angular.tlds.tlds[i].checked.DUMMY=!0,$(window).trigger("update_checked",[i,"DUMMY"]),c=!0),e.stack[g.stack_index].forced_lookup=!0}}catch(k){}return c},_private.build.pre_set_specials=function(a){QUNIT&&(_rfes=test_obj._refs);var a=a||"";"string"==typeof a||a.length>0&&$.each(a,function(a,b){if("top_5"===b)_refs.top_five.attr("checked",!0).trigger("click").attr("checked",!0);else if("eu_banner"===b)try{_private.build.special.de_eu_bundle("EU")}catch(c){}else if("de_banner"===b)try{_private.build.special.de_eu_bundle("DE")}catch(c){}else"de_eu_check"===b&&_private.build.special.de_eu_check("DE")})},_private.communication.get_limitations_from_wk=function(){},_private.communication.notepad={authinfo_confirm:function(a,b){a=a||{},b=b||function(){},$("#confirm-overlay").hide(),$("#confirm-container").hide(),"close"===a.action||b(a)},def_ajax:function(a,b){var c,b=b||function(){},a=a||!1,d=!1,e=!1,f=!1;if(a)if(a.action){if(e=a.action,f=a.KK||!1,"delete"===e)a.domainname&&a.tld?d=_data.urls.notepad.remove+"domainname/"+(a.ace_name||a.domainname)+"/tld/"+a.tld+"/":b(!1);else if("add"===e)if(a.domainname&&a.tld){if(d=_data.urls.notepad.add+"domainname/"+(a.ace_name||a.domainname)+"/tld/"+a.tld+"/",f){var g=escape(a.authcode||"");g=g.replace(/\+/,"%2B"),g=g.replace(/\//,"%2F"),g=g.replace(/\*/,"%2A"),g=g.replace(/\@/,"%40"),g=g.replace(/\</,"%3C"),g=g.replace(/\>/,"%3E"),d+="change_provider/1/",d+="authcode/"+g+"/"}}else b(!1);else"tie"===e&&a.domainname&&a.tld?d=_data.urls.notepad.tie:b(!1);if(d&&e)return function(){c=$.getJSON(d),c.error(function(a){b(!1)}),c.success(function(a){b(a)})}}else b(!1);else b(!1)}},_private.validation.notepad.authinfo_needed=function(a){var b,c=!0,d=["at","es","co.uk","org.uk","me.uk"];for(a=a||"none",b=0;b<d.length;b++)c=d[b]===a.toLowerCase(),c&&(b=d.length+1);return!c},_private.validation.notepad.get_serchstack_item=function(a){var b,c,d=(""+a.tld).replace(/\_/,".").toLowerCase(),e=a.domain_name_ACE+"."+d||a.domain_name+"."+d,f=_data.search_stacks;for(c=0;c<f["default"].stack.length;c++)if(b=f["default"].stack[c],e===(b.ace_name+"."+b.tld_name||b.domainname+"."+b.tld_name))return c=f["default"].stack.length+1,b;for(c=0;c<f.suggestions.stack.length;c++)if(b=f.suggestions.stack[c],e===(b.ace_name+"."+b.tld_name||b.domainname+"."+b.tld_name))return c=f.suggestions.stack.length+1,b;return!1},_private.validation.notepad.is_in_basket=function(a){var b,c=a.ace_name,d=a.tld_name,e=c+"."+d;for(b=0;b<_data.notepad_data.domains_in_basket.length;b++){var f=_data.notepad_data.domains_in_basket[b],g=f.domain_name_ACE+"."+(""+f.tld).replace(/\_/,".").toLowerCase();if(g==e)return b=_data.notepad_data.domains_in_basket.length+1,f.KKable?"is_in_basket_kk":"is_in_basket"}return!1},_private.validation.notepad.is_in_notepad=function(a){var b,c,d=_private.punycode_converter;for(a.ace_name=a.domain_name_ACE||a.ace_name,b=0;b<_data.notepad_data.incl_domains.length;b++)if(c=_data.notepad_data.incl_domains[b],c.ace_name=c.domain_name_ACE||d.EncodeDomain(""+c.domain_name),a.ace_name===c.ace_name&&a.tld_name.toLowerCase()===c.tld.toLowerCase())return c.result_item=_private.validation.notepad.get_serchstack_item(a),c.KKable?"is_in_notepad_kk":"is_in_notepad";for(b=0;b<_data.notepad_data.excl_domains.length;b++)if(c=_data.notepad_data.excl_domains[b],c.ace_name=_private.punycode_converter.EncodeDomain(""+c.domain_name),a.ace_name===c.ace_name&&a.tld_name.toLowerCase()===c.tld.toLowerCase())return c.result_item=_private.validation.notepad.get_serchstack_item(a),c.KKable?"is_in_notepad_kk":"is_in_notepad";return!1},storefront.globals.feature_toggles&&storefront.globals.feature_toggles.classic_ordering&&(_private.validation.notepad.is_in_basket=function(a){var a=a||{};if(a.ace_name){try{a.is_in_basket=storefront.ordering.utils.Main.warenkorb.neu.domains().is_in_basket({ace_name:""+a.ace_name,tld_name:""+a.tld_name})}catch(b){a.is_in_basket=!1}return a.is_in_basket?"is_in_basket":!1}return!1},_private.validation.notepad.is_in_notepad=function(){return!1}),_private.build.notepad.create=function(){var a=_refs.notepad,b=this.create_display_article(),c=this.create_display_domains(),d=$("<div/>",{id:"notepad_head"}),e=this.create_foot(),f=this.create_display_domains_headline(),g=_data.notepad_data.incl_domains||[],h=_data.notepad_data.excl_domains||[],i=_data.notepad_data.unord_domains||[],j=g.length+h.length+i.length;sticky_domainsearch.set_noChosenDomains(j),_data.notepad_data.deliverable&&a.append(b),d.append($("<table></table>").append(f)).append(e).append($("<div/>",{id:"shader"})),a.append(d),a.append(c),g.length+h.length+i.length>0?(e.show(),_private.build.notepad.append_domain_list(c)):(_private.build.notepad.showNoneNoted(),e.hide()),sticky_domainsearch.setTextAssets(_data.notepad_data.texte)},_private.build.notepad.create_display_article=function(){var a=$("<div></div>");return a.attr("id","notepad_Hauptartikel").append(this.create_display_article_headline(),this.create_display_single_article_item(_data.notepad_data.package_titel).attr("id","notepad_Hauptartikel_titel"),this.create_package_price().attr("id","notepad_Hauptartikel_price")),this.create_package_next_invoice(a),_data.notepad_data.incl_slots>0&&a.append(this.create_incl_slots_info()),a},_private.build.notepad.create_display_domains=function(){var a=$("<div></div>").attr("id","notepad_Domains");return _data.notepad_data.has_domains&&a.show(),a},_private.build.notepad.create_display_domains_headline=function(){var a=$('<td colspan="3"></td>'),b=_data.notepad_data.texte.domains;return a.attr("id","notepad_Domains_headline").html(b.domains_headline),$("<tr></tr>").append(a)},_private.build.notepad.create_foot=function(){var a=$("<div></div>").attr("id","notepad_foot").css({clear:"left"}).append("<div class='button_line'></div>");return a.append($('<button class="orderingbtn forward"></button>').attr("id","notepad_adopt").html(_data.notepad_data.texte.adopt).bind("click",function(){document.location=_data.urls.notepad.tie})),a},_private.build.notepad.parse_price_string=function(a){if(!a)return!1;a=a||"0","0"===a&&(a="000");var b=a.split("").reverse();return b.splice(2,0,_data.notepad_data.decimal_point),(3===b.length||b.length<3)&&b.push("0"),b.reverse().join("")},_private.build.notepad.split_number_unit=function(a){var b,c={number:!1,unit:!1};for(b=0;b<a.length;b++)isNaN(parseInt(a[b],10))?(c.unit=c.unit||"",c.unit+=a[b]):(c.number=c.number||"",c.number+=a[b]);return c},_private.build.notepad.append_domain_list=function(a){var b,c,d,e=_data.notepad_data.incl_domains||[],f=_data.notepad_data.excl_domains||[],g=_data.notepad_data.unord_domains||[];for(b=0;b<g.length;b++)if(c=!1,d={},g[b].refs={},g[b].unord_domain=!0,g[b].incl_domain=!1,g[b].tld=(""+g[b].tld).replace(/\_/,".").toLowerCase(),g[b].domain_name_complete=g[b].domain_name+"."+g[b].tld,a.append(this.create_display_single_domain_item(g[b])),c=storefront.globals.QUNIT?!1:_private.validation.notepad.get_serchstack_item(g[b]),c&&(d[c.domainname+"."+c.tld_name]="is_in_notepad"),g[b].KKable&&_private.validation.notepad.authinfo_needed(g[b].tld)){var h=_private.build.authinfo.create_authinfo_div(g[b]);a.append($("<table></table>").append(h))}for(b=0;b<e.length;b++)if(c=!1,d={},e[b].refs={},e[b].incl_domain=!0,e[b].tld=(""+e[b].tld).replace(/\_/,".").toLowerCase(),e[b].domain_name_complete=e[b].domain_name+"."+e[b].tld,a.append(this.create_display_single_domain_item(e[b])),c=storefront.globals.QUNIT?!1:_private.validation.notepad.get_serchstack_item(e[b]),c&&(d[c.domainname+"."+c.tld_name]="is_in_notepad"),e[b].KKable&&_private.validation.notepad.authinfo_needed(e[b].tld)){var h=_private.build.authinfo.create_authinfo_div(e[b]);a.append($("<table></table>").append(h))}for(b=0;b<f.length;b++)if(c=!1,d={},f[b].refs={},f[b].incl_domain=!1,f[b].tld=(""+f[b].tld).replace(/\_/,".").toLowerCase(),f[b].domain_name_complete=f[b].domain_name+"."+f[b].tld,a.append(this.create_display_single_domain_item(f[b])),c=storefront.globals.QUNIT?!1:_private.validation.notepad.get_serchstack_item(f[b]),c&&(d[c.domainname+"."+c.tld_name]="is_in_notepad"),f[b].KKable&&_private.validation.notepad.authinfo_needed(f[b].tld)){var h=_private.build.authinfo.create_authinfo_div(f[b]);a.append($("<table></table>").append(h))}a.show(),e.length+f.length+g.length>0?($("#notepad_foot").show(),sticky_domainsearch.handleNoDomainselectBtn("hide")):(_private.build.notepad.showNoneNoted(),"0"===domain_required_back?sticky_domainsearch.handleNoDomainselectBtn("show"):"1"===domain_required_back&&sticky_domainsearch.handleNoDomainselectBtn("hide"),1===$("#notepad_Hauptartikel").length&&$("#notepad_foot").hide(),$("#domain_search_submit").removeClass("back"))},_private.build.notepad.showNoneNoted=function(){$("#notepad_Domains").append($("<div></div>").html(_data.notepad_data.texte.domains.none_noted))},_private.build.notepad.create_display_single_domain_item=function(a){var b,c,d,e=(a.KKable||0,this.split_number_unit(a.domain_price_monthly_first||"")),f=this.parse_price_string(e.number),g=_data.notepad_data.currency_codes[e.unit],h=$("<tr></tr>").addClass("domain_item"),i=$("<div></div>");return b=_private.punycode_converter.DecodeDomain(a.domain_name_ACE||a.domain_name),i.html(b+"."+(""+a.tld).replace(/\_/,".").toLowerCase()),a.refs.notepad_row=h,storefront.globals.QUNIT?a.refs.result_item={}:a.refs.result_item=_private.validation.notepad.get_serchstack_item(a),h.append(this.create_domain_item_action(a),$("<td></td>").addClass("domain_item_name").append(i)),storefront.globals.QUNIT?$("<table></table>").append(h):(_refs.truncator=_refs.truncator||[],_refs.truncator.push({ref:i,max_px:200,to_keep:a.tld,replacement:"[...]",type:"domain"}),a.incl_domain?h.append($("<td><span>"+_data.notepad_data.texte.inklusive+"</span></td>").addClass("domain_item_price")):(d={country:globals._data.country,pro_ab:"",price:f,price_currency:g},a.unord_domain?d.pro_ab=_data.notepad_data.texte.ab:d.pro_ab=_data.notepad_data.texte.pro_monat,h.append(this.get_country_domain_price(d))),c=$("<table></table>").append(h))},_private.build.notepad.get_country_domain_price=function(a){var b,a=a||{},c=a.country||"DE",d=a.price||"0",e=a.price_currency||"€",f=a.pro_ab||"";if("undefined"!=typeof _private.package_data&&"undefined"!=typeof _private.package_data.deliverable&&0===_private.package_data.deliverable)return b=$("<td>&nbsp;</td>").addClass("domain_item_price"),"ES"!==c&&"FR"!==c&&$("#notepad_adopt").html(_data.notepad_data.texte.no_article_adopt),b;switch(c){case"NL":b=$("<td><span>"+f+"&nbsp;"+e+"&nbsp;"+d+"</span></td>").addClass("domain_item_price");break;default:b=$("<td><span>"+f+"&nbsp;"+d+"&nbsp;"+e+"</span></td>").addClass("domain_item_price")}return b},_private.build.notepad.callback_functions={domain_item_action:function(){return function(a,b){if(a){var c={},d=a.inclusive_domain_in_basket||[],e=a.exclusive_domain_in_basket||[],f=a.unordered_domain_in_basket||[];$("#notepad #notepad_Domains"),$("#notepad #notepad_foot");if(b.refs.result_item=_private.validation.notepad.get_serchstack_item(b),b.refs.result_item.is_in_notepad=!1,b.refs.result_item.status=!1,b.refs.result_item){var g=b.domain_name_ACE+"."+b.tld||_private.punycode_converter.EncodeDomain(""+b.domain_name_complete);c[g]=""+(b.KKable||0),b.refs.result_item.onsuccess(c)}var h=$("#notepad #notepad_Domains").html("").append($("<table></table>").append(_private.build.notepad.create_display_domains_headline())),d=a.inclusive_domain_in_basket||[],e=a.exclusive_domain_in_basket||[],f=a.unordered_domain_in_basket||[],i={package_data:!1,domain_data:a};if(_private.notepad_data_dispatcher(i))return _private.build.notepad.append_domain_list(h),d.length+e.length+f.length>0?$("#notepad #notepad_foot").show():$("#notepad #notepad_foot").hide(),_private.build.truncator(),!0}}}()},_private.build.notepad.create_domain_item_action=function(a){var b=this.callback_functions,c=$("<td></td>").addClass("domain_item_action"),d=$('<i class="icon-cancel-circle"></i>');return d.bind("click",function(){d.trigger("_remove")}),d.bind("_remove",_private.communication.notepad.def_ajax({action:"delete",domainname:a.domain_name_ACE||a.domain_name,tld:a.tld.toLowerCase()},function(c){b.domain_item_action(c,a);try{$.each(strato.domainsearch.notepad.callbacks,function(a,b){b()})}catch(d){console.log(d)}})),c.append(d)},_private.build.notepad.create_incl_slots_info=function(){var a,b=$("<div></div>"),c=_data.notepad_data.incl_slots+" #text_placeholder# ";if(_data.notepad_data.incl_TLDs){for(c+="(&nbsp;",a=0;a<_data.notepad_data.incl_TLDs.length;a++)c+="."+_data.notepad_data.incl_TLDs[a]+", ";c=c.slice(0,-2).toLowerCase(),c+="&nbsp;)",c=c.replace("#text_placeholder#",""+_data.notepad_data.texte.hosting_pakete.incl_slots)}return b.html(c).attr("id","notepad_Hauptartikel_incl_slots")},_private.build.notepad.get_country_price_string=function(a){var b="",a=a||{},c=a.price||!1,d=a.billing_period||"",e=a.billing_p_unit||"M",f=a.country||"DE",g=a.currency_code||"EUR",h=_data.notepad_data.currency_codes[g],i=_data.notepad_data.time_units[e],j=_data.notepad_data.texte.fuer;if(!c)return"&nbsp;";switch(f){case"NL":b=h+" "+c;break;default:b=c+" "+h}return h=d+" "+i+" "+j+" "+b},_private.build.notepad.create_package_price=function(){var a=_data.notepad_data.package_price,b=_data.notepad_data.package_currency_code,c=_data.notepad_data.package_b_period,d=_data.notepad_data.package_b_period_unit,e=this.get_country_price_string({price:this.parse_price_string(a),billing_period:c,billing_p_unit:d,country:globals._data.country,currency_code:b});return this.create_display_single_article_item(e)},_private.build.notepad.create_package_invoice_price=function(a){if(!a)return con.err("create_package_invoice_price : 'p_invoice' nicht &Atilde;&frac14;bergeben"),!1;var b=_data.notepad_data.time_units,c=this.split_number_unit(a.amount),d=this.split_number_unit(a.billing_period),e=c.number,f=c.unit||"EUR",g=d.number,h=d.unit||"M",i=a.until_experation_of_contract||!1,j=_data.notepad_data.texte.danach+" ";return parseInt(g,10)<2&&(h=h.toLowerCaseCase()),i||(j+=" "+_data.notepad_data.texte.fuer+" "+g+" "+b[h]),j+=this.parse_price_string(e)+" "+_data.notepad_data.currency_codes[f],i&&(j+="<br />"+b.adjective[h]+" "+_data.notepad_data.texte.bis_ende_VLZ),this.create_display_single_article_item(j)},_private.build.notepad.create_package_next_invoice=function(a){if(!_data.notepad_data.package_next_invoice)return!1;var b,c=_data.notepad_data.package_next_invoice;if("string"==typeof c)a.append(this.create_display_single_article_item(c).attr("id","notepad_Hauptartikel_next_invoice_1"));else for(b=0;b<c.length;b++)a.append(this.create_package_invoice_price(c[b]).attr("id","notepad_Hauptartikel_next_invoice_"+(b+1)))},_private.build.notepad.create_display_article_headline=function(){var a=$("<div></div>"),b=_data.notepad_data.texte.hosting_pakete;return a.attr("id","notepad_Hauptartikel_headline").append($("<span></span>").html(b.article_headline)),a},_private.build.notepad.create_display_single_article_item=function(a){return $("<div></div>").append($("<span></span>").html(a||""))},_private.build.authinfo.create_authinfo_div=function(a){var b,c,d=$("<tr></tr>"),e=a.kkauth_code||"";return a.kkauth_code.length>0?(b=$('<td class="authcode"></td>'),c=$("<div>"+e+"</div>").addClass("authinfo_link"),d.append($("<td></td>").html(_data.notepad_data.texte.authinfo.confirm_headline+":").addClass("authinfo_text"),b.append(c)),_refs.truncator=_refs.truncator||[],_refs.truncator.push({ref:c,max_px:200,to_keep:!1,replacement:"...",type:"authcode"})):(b=$('<td class="authcode authinfo_text"></td>'),c=$("<div></div>").html(_data.notepad_data.texte.authinfo.confirm_headline).addClass("authinfo_link"),d.append(b.append(c))),c.bind("click",{domain_data:a},function(b){_private.build.authinfo.create_authinfo_overlay(a,function(a){_private.communication.notepad.def_ajax({action:"add",domainname:a.domain_name,tld:a.tld.toLowerCase(),KK:!0,authcode:a.authcode},function(a){if(a){var b=$("#notepad #notepad_Domains").html("").append($("<table></table>").append(_private.build.notepad.create_display_domains_headline())),c=a.inclusive_domain_in_basket||[],d=a.exclusive_domain_in_basket||[],e=a.unordered_domain_in_basket||[],f={package_data:!1,domain_data:a};if(_private.notepad_data_dispatcher(f))return _private.build.notepad.append_domain_list(b),c.length+d.length+e.length>0?$("#notepad #notepad_foot").show():$("#notepad #notepad_foot").hide(),_private.build.truncator(),!0}})()})}),d},_private.build.authinfo.create_authinfo_overlay=function(a,b){confirm();var c=$("div#confirm-overlay"),d=$("a.modal-close"),e=$("div.simplemodal-wrap"),f=$.extend({},a);return f.action=a.action||"edit",d.bind("click",function(a){f.action="close",_private.communication.notepad.authinfo_confirm(f,b)}),e.html("").append(_private.build.authinfo.create_authinfo_form(f,b)),c.show(),$("#confirm-container").show()},_private.build.authinfo.create_authinfo_form=function(a,b){a.authcode=a.authcode||"",a.kkauth_code=a.kkauth_code||"",a.kkauth_code.length<1&&(a.kkauth_code=""+a.authcode),a.authcode.length<1&&(a.authcode=a.kkauth_code),a.domain_name_complete||(a.domain_name_complete=a.domainname+"."+a.tld);var c=($("#rahmen"),$("div#confirm-container").addClass("step_domainsuche")),d=$("div.simplemodal-wrap"),e=$('<div id="confirm_message" class="message"></div>'),f=($("form"),$('<div id="info_text_later"></div>')),g=$('<div id="confirm_eingabe"></div>'),h=$('<div id="confirm_eingabe_input"></div>'),i=$("<div></div>").attr("id","confirm_eingabe_button"),j=$('<input type="text">').addClass("no-error").val(""+a.authcode).attr({id:"kkauth_code",name:"kkauth_code",maxlength:20,size:31}),k=$("<button></button>").addClass("forward").attr("id","authinfo_adopt").html(_data.notepad_data.texte.authinfo.confirmation).bind("click",function(){var e=""+j.val(),f=e.replace(/\ /,""),g=_data.notepad_data.refs.div_err_authcode,h=_data.notepad_data.schema.kkauth_code,i=h[0].err_id,k=h[0].ok_pattern,l=!0;f.length>0?(""+e).match(RegExp(k,"ig"))||(l=!1):j.val(""),l?(g.html("").hide(),a.authcode=""+e,_private.communication.notepad.authinfo_confirm(a,b)):(c.hasClass("edit")?c.css({height:"175px"}):(c.css({height:"266px"}),d.append(m)),g.html(_data.notepad_data.error_texte[i]).show())}),l=$("<button></button>").addClass("forward").attr("id","authinfo_enter_later").html(_data.notepad_data.texte.authinfo.enter_later).bind("click",function(){a.authcode="",_private.communication.notepad.authinfo_confirm(a,b)}),m=$("<div></div>").attr("id","confirm_later"),n=$("<div></div>").attr("id","authinfo_info"),o=$("<img>").attr({id:"close_authinfo_info",src:"/global_static/img/icons/icon_close.png"}).css({heigth:"15px",width:"15px"}),p=$("<img>").attr({id:"show_authinfo_info_img",src:"/global_static/img/icons/info.png",height:"19",width:"19"}),q=$("<div></div>").attr("id","confirm_headline"),r=$("<div></div>").attr("id","confirm_statement").html(function(b){return b.replace(new RegExp("##domainname##"),"<div style='display:inline; white-space:nowrap; font-weight:bold;'>"+a.domain_name_complete+"</div>")}(_data.notepad_data.texte.authinfo.confirm_statement_tmpl)),s=$("<div></div>").attr("id","err_kkauth_code").addClass("error_text").css({width:"100%"}).hide();_data.notepad_data.refs.div_err_authcode=s,p.bind("click",function(){n.show()}).css({cursor:"pointer"}),o.bind("click",function(){n.hide()}).css({cursor:"pointer"}),q.append($("<div></div>").html(_data.notepad_data.texte.authinfo.confirm_headline),$("<div></div>").append(p)),n.append($("<div></div>").css({height:"5px","float":"right"}).append(o),$("<span></span>").html(_data.notepad_data.texte.authinfo.info_text)),f.css({"line-height":"17px",margin:"5px 0",width:"100%"}).html(""+_data.notepad_data.texte.authinfo.info_text_later),g.append(f,s,h.append(j),i.append(k)),m.append(l),"edit"!==a.action&&d.append(e.append(r.hide())),d.append(e.append(q,n,g)),c.removeClass("edit"),c.removeClass("add"),"edit"===a.action?(c.addClass("edit"),c.css({height:"150px"})):(c.css({height:"246px"}),c.hasClass("step_domainsuche")||c.css({height:"246px"}),d.append(m)),r.show(),_private.build.truncator(r.find("div"),r,a.tld)},_private.build.authinfo.create_div_authinfo_error=function(a){return $("<div></div>").hide()},api};var DomainsucheMain=function(){var a=new strato._classes.domainsearch.Globals,b=new strato._classes.domainsearch.Build(a),c=new strato._classes.domainsearch.Validation(a),d=new strato._classes.domainsearch.Search(a),e=new strato._classes.domainsearch.Main(a,b,c,d);return e};angular.module("ngPortalApp",["filters","domainchecker"]);var portal_config={};angular.module("filters",[]).filter("trustAsHtml",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]).filter("makeList",["$sce",function(a){return function(b){var c="";return $.each(b,function(a,b){var d=b.name.toLowerCase();d+=a!==b.length?",":"",c+="<li>"+d+"</li>"}),a.trustAsHtml(c)}}]).filter("textResize",["$sce",function(a){return function(b){var c=$("#selector > span"),d=c.text(),e=$("<div/>").html(b),f=$("#selector");decoded_string=""!==e?e.text():"",b!==d&&(c.css("font-size",""),c.css("letter-spacing",""),c.attr("data-text_resized",""));var g=parseInt(f.width())-30,h=0,i=18,j=0;if(decoded_string===d&&""===c.attr("data-text_resized")){for(;c.width()>g;)j++,-1>=h&&(h=0,i-=1,c.css("font-size",i)),h-=.2,c.css("letter-spacing",h);j>0&&c.attr("data-text_resized","i_"+j)}return a.trustAsHtml(b)}}]).filter("shrinkSelected",["$sce",function(a){return function(b){if(b){var c="",d="";return c='<span class="'+d+'">'+b+"</span>",a.trustAsHtml(c)}}}]),angular.module("domainchecker",[]).controller("ngDomainChecker",["$scope","$http",function(a,b){function c(){if(!o)return!0;var b=arguments[0],c=(arguments[1],arguments[2]);if("function"==typeof c);else if(c){var d=p[b];d(arguments)}else{var e=!1;switch(typeof arguments[1]){case"object":e=$.extend(!0,{},arguments[1]);break;default:e=arguments[1]}a.tests[arguments[0]]=e}}function d(b,c){var d=[];$.each(b,function(b,c){var e=a.tlds.category_mapping[c],f={name:e.name||"",id:c,option:"option",highlight:!0};a.tlds.category_mapping[f.id].tlds&&g(a.tlds.category_mapping[f.id].tlds,f),a.selected=c===a.pre_selected?f:a.selected,d.push(f)}),c=$.extend(!0,c,{sub_items:d})}function e(a){var b=[];return $.each(a,function(a,c){b.push(a)}),b}function f(){var b=arguments[0];$.each(b,function(b,c){if(void 0!==a[b])switch(typeof c){case"object":a[b]=$.extend(!0,{},c);break;default:a[b]=c}})}function g(a,b){var c=[];$.each(a,function(a,b){var d={name:"."+b||"",id:b,index:a,option:"option",highlight:!0,checked:!1};c.push(d)}),b=$.extend(!0,b,{sub_items:c})}function h(b){var c=!1,d=a.tlds.category_mapping;if("object"==typeof b&&$.isArray(b)&&b.length>0){var e={id:!1,num:0,tld_list:[]};$.each(d,function(a,c){var d=0,f=[];$.each(b,function(a,b){-1!==c.tlds.indexOf(b)&&(d++,f.push(b))});var g=c.tlds.length;d===e.num&&g<e.num_all&&d>0?e={num_all:g,num:d,id:a,tld_list:f}:d>e.num&&(e={num_all:g,num:d,id:a,tld_list:f})}),e.num>0&&e.id&&(a.pre_selected=e.id||a.pre_selected,$.each(e.tld_list,function(b,c){c&&a.tlds.tlds[c]&&(a.tlds.tlds[c].checked[e.id]=!0)}))}return a.pre_selected||(a.pre_selected=a.getDefault("category")),c}function i(f,g){a.init_data=$.extend(!0,f,{angular:a});try{var i=f&&(f.config_data.num_pre_selected||0===f.config_data.num_pre_selected)?f.config_data.num_pre_selected:!1;a.default_values.selected="number"==typeof i?i:a.default_values.selected}catch(j){}c("mandator",a.init_data.config_data.mandator,!0),a.init_data.config_data.mandator||(c("use_default_mandator",!0),a.init_data.config_data.mandator="strato");var k=g?"/_assets_"+portal_config.tld+"/module/domainchecker/assets.js":"/buy_static/"+a.init_data.config_data.mandator+"/js/assets.js";storefront.globals.feature_toggles&&storefront.globals.feature_toggles.classic_ordering&&(k="/assets/ordering/strato/"+storefront.globals.country+"/js/assets.js"),b({method:"GET",url:k}).success(function(g){if(b({method:"GET",url:"/buy_static/"+a.init_data.config_data.mandator+"/js/TLDs_price_list.js"}).success(function(b){a.tld_price_list=$.extend("deep",{},b);var c=new DomainsucheMain;f.callback_fn=function(a){"function"==typeof window.checkInit&&window.QUnit&&(window.QUnit.start(),window.checkInit(a.tests))},c.init(f)}),a.texte=$.extend(!0,{},g.texte),c("texte",a.texte),f.initial_data){c("initial_data",!0),a.tlds=f.initial_data.domain_data.field_info.TLD,c("tld_data_orig",a.tlds);var i={tlds:{}};$.extend(!0,a.tlds,i),$.each(a.tlds.category_mapping,function(b,c){c.tlds&&$.each(c.tlds,function(c,d){if(a.tlds.tlds[d])a.tlds.tlds[d].checked||(a.tlds.tlds[d].checked={}),a.tlds.tlds[d].checked[b]=!1;else{var e={};e[d]={checked:{}},e[d].checked[b]=!1,$.extend(!0,a.tlds.tlds,e)}})}),c("tld_data_extended",a.tlds);var j=!1,k=a.init_data.pre_set_data,l=a.tlds.category_mapping;if(k){if(a.tlds){var m=k.search_type?k.search_type:"default",n=j||k.tlds[0];switch(n&&l[n]?(a.pre_selected=n,m="PRESET"):a.isPackage("STRATO_DOMAIN")&&(m="DOMAIN_STRATO"),m){case"PROVIDER_WECHSEL":var o=a.getTLDList("PROVIDER_WECHSEL");h(o),a.params.force_search_stack="PROVIDER_WECHSEL";break;case"DOMAIN_STRATO":var o=a.getTLDList("DOMAIN_STRATO");h(o),a.params.force_search_stack="DOMAIN_STRATO";break;case"TLDS":var o=a.getTLDList("TLDS");h(o),a.params.force_search_stack="TLDS";break;case"PRESET":break;default:a.pre_selected=a.getDefault("category")}c("get_default",a.pre_selected)}}else a.pre_selected=a.getDefault("category"),!a.pre_selected;a.items=[];var p=!0;return a.tlds.category_groups&&$.each(a.tlds.category_groups,function(b,c){var f=a.tlds.category_groups[b],g=e(f),h=g.length>0?g[0]:!1,i=!1;if(h){i=f[h];var j={name:i.name||"",id:c,option2:"option2"};p&&d(i.categories,j),a.items.push(j)}}),a.changeItem(a.selected),$("body").trigger("start_ds"),a.init_show=!0,a.items}}).error(function(a){})}function j(){var b=!1,c=e(a.tlds.category_groups[0]),d=c[0];return $.each(a.tlds.category_groups[0][d],function(a,c){b=a}),a.tlds.category_groups[0][d].categories[0]}function k(a,b,c){return a=$.extend(!0,{},b),a.initial_data={domain_data:$.extend(!0,{},a.domain_data)},a.domain_data={},a.config_data={mandator:portal_config.mandator,mandator_path:portal_config.mandator_path},i(a,c),a}a.items=[],a.init_data=!1,a.dropdown_open=!1,a.selector_active=!1,a.dropdown_active=!1,a.selection="category",a.selected=!1,a.sub_items=!1,a.tld_list=[],a.tld_price_list={},a.current_tlds=!1,a.more_tlds=!1,a.tests={},a.texte=!1,a.warnings={},a.logs={},a.rows=[],a.pre_selected=!1,a.no_categories=!1,a.first_load={},a.has_stack=!1,a.toggle_area=!1,a.time=[[(new Date).getTime(),"start"]],a.init_show=!1,a.default_values={selected:8},a.params={force_search_stack:!1};var l=$("body"),m=$("#fancy_list"),n=$("#selector"),o=void 0!==window.opts?window.opts.qunit||!1:!1,p={mandator:function(){a.tests[arguments[0][0]]=arguments[0][1]||!1},function_stack:function(){var b=arguments[0][0],c=arguments[0][1];void 0===a.tests[b]&&(a.tests[b]=[]),a.tests[b].push(c)}};n.click(function(b){a.dropdown_open=!a.dropdown_open,a.dropdown_open||($(".flyout").removeClass("active"),$("[data-item*='item_'] > div.flyout").hide(),a.sub_items=!1)}),l.click(function(b){!a.dropdown_open||a.selector_active||a.dropdown_active||(n.click(),$(".flyout").removeClass("active"),$("[data-item*='item_'] > div.flyout").hide(),a.sub_items=!1)}),n.mouseenter(function(b){a.selector_active=!0}).mouseleave(function(b){a.selector_active=!1}),m.mouseenter(function(b){a.dropdown_active=!0}).mouseleave(function(b){a.dropdown_active=!1}),a.getTLDList=function(b){var d=[];switch(b){case"DOMAIN_STRATO":var e=a.init_data.domain_data.inclusive_tld_list,f=a.init_data.initial_data.domain_data.field_info.TLD.field_value;if(e&&e.length>0){var g=[];$.each(e,function(a,b){f.indexOf(b)>-1?d.push(b):g.push(b)}),a.isEmpty(g)||(a.warnings["DOMAIN_STRATO: some wrong inclusive tlds detected"]=g),a.isEmpty(d)&&(a.logs["DOMAIN_STRATO: inclusive_tlds"]="no existant inclusive TLDs detected")}if(a.isEmpty(d)){var h=a.init_data.initial_data.shortname,i=h.replace("STRATO_DOMAIN_","");if(i=i.replace("_","."),f.indexOf(i)>-1)d.push(i),a.logs["DOMAIN_STRATO: get TLD"]="by shortname: "+h;else{a.logs["DOMAIN_STRATO: shortname"]="no existant TLD extracted";var j=a.init_data.package_data.name;if(j){var k=j.match(/^STRATO\sDomain\s\.([^\s]*)+$/),l=j.match(/^Pack\sDomaine\s\.([^\s]*)+$/);k&&k.length>1?f.indexOf(k[1].toUpperCase())>-1?(d.push(k[1].toUpperCase()),a.logs["DOMAIN_STRATO: get TLD"]="by package name (DE): "+j):a.warnings["DOMAIN_STRATO: package_name (DE)"]="no existant TLD extracted":l&&l.length>1?f.indexOf(l[1].toUpperCase())>-1?(d.push(l[1].toUpperCase()),a.logs["DOMAIN_STRATO: get TLD"]="by package name (FR): "+j):a.warnings["DOMAIN_STRATO: package_name (FR)"]="no existant TLD extracted":a.warnings["DOMAIN_STRATO: error"]="no existant TLD detected"}}}else a.logs["DOMAIN_STRATO: get TLD"]="by inclusive TLD(s): "+e.toString();c("DOMAINPAKET_tld",d);break;case"TLDS":d=a.init_data.pre_set_data.tlds;break;case"PROVIDER_WECHSEL":var m=a.getDomain(a.init_data.pre_set_data.domainname);d=m.tld.length>0&&"string"==typeof m.tld?[m.tld.toUpperCase()]:!1}return d},a.show_area=function(){
var b=arguments[0];return b?(a.toggle_area=a.toggle_area===b?!1:b,a.toggle_area===b):(a.toggle_area=!1,!1)},a.unit_test=function(){var a=arguments[0]||!1,b=arguments[1]||!1,d=arguments[2]||!1;c(a,b,d)},a.changeItem=function(b){var d={newItem:b,data:a.tlds.category_mapping[b.id],sub_items:{},selected:void 0,dropdown_open:void 0,group_tlds:!1};b&&d.data&&(d.data.id=d.data.id||b.id,$(window).trigger("update_category",[d.data]),d.selected=$.extend(!0,d.data,b),d.dropdown_open=!1,d.sub_items={tlds:b.sub_items,name:b.name},a.first_load[b.id]?a.setCheckedMulti(d.sub_items.tlds,b.id):(a.setCheckedMulti(d.sub_items.tlds,b.id,!0),a.first_load[b.id]=!0),f(d),c("changeItem",d)),a.dropdown_open=!1,$("div.flyout").hide(),$("[data-item*='item_'] > div.flyout").hide(),a.get_current_TLDs(),a.rows=a.makeRows()},a.setKomma=function(a,b){var c=a.name;return c+=b?"":",",c.toLowerCase()},a.makeRows=function(){var b=a.selected.sub_items,c=[],d=[],e=Math.ceil(a.selected.sub_items.length/4),f=0;if(!b)return[];for(f=0;e>f;f++)c.push(f),d.push(b.slice(4*f,4*(f+1)));return d},a.in_group=function(){var a=arguments[0],b=Math.floor(a/4);return a-4*b/4},a.isExtended=function(a,b){return(a+1)*b>12?!0:!1},a.details=function(b){var c={tlds:b.sub_items,name:b.name};a.sub_items=$.extend(!0,{},c),$(".arrow").removeClass("active"),$(".arrow.tld_"+b.id).addClass("active"),$("div.flyout").hide(),$("[data-item='item_"+b.id+"'] > div.flyout").show()},a.isOpen=function(){return!a.dropdown_open},a.groupTLDs=function(b,c,d){var e=[],f=[],g=1;return $.each(b,function(b,h){b<a.default_values.selected&&a.has_stack&&!a.first_load[d]&&a.setChecked(h,d,!0);b===g*c&&(e.push(f),g++,f=[]),a.init_data.initial_data.domain_data.field_info.TLD.field_value.indexOf(h.id)>-1&&f.push(h)}),e.push(f),a.tld_list=e,e},a.get_current_TLDs=function(){var b=a.tlds.category_groups;$.each(b,function(b,c){$.each(c,function(b,c){c.categories.indexOf(a.selected.id)>-1&&(a.current_tlds=c)})})},a.isChecked=function(){var b=arguments[0],c=arguments[1]||!1,d=a.tlds.tlds[b];return"boolean"==typeof d.checked?a.tlds.tlds[b].checked:c&&d.checked[c]?a.tlds.tlds[b].checked[c]:void 0},a.getMoreTLDs=function(){var a=arguments[0];return a&&a.tlds?a.tlds.length>12:!1},a.isEmpty=function(){var a=arguments[0],b=Array.isArray(a)?"array":typeof a;switch(b){case"array":return 0===a.length;case"object":return 0===Object.getOwnPropertyNames(a).length;case"string":return 0===a.length;default:return!0}},a.isPackage=function(){var b=arguments[0],c=a.init_data.package_data,d=a.init_data.initial_data.shortname||"",e=!1;if(!c)return e;switch(b){case"STRATO_DOMAIN":(!a.isEmpty(c)&&"DOMAIN_STRATO"===c.group||0===d.indexOf("STRATO_DOMAIN_")||"STRATO_MAILDOMAIN"===d)&&(e=!0)}return e},a.getDomain=function(){var a={string:"",name:"",tld:"",detect_status:0,tld_index:-1},b=window.opts.initial_data.domain_data.field_info.TLD.field_value;a.string=arguments[0],a.string="string"==typeof a.string?a.string.replace(" ",""):a.string;var d=a.string.split("."),e=d.length,f=e>2?(d[e-2]+"."+d[e-1]).toUpperCase():"",g=e>1?d[e-1].toUpperCase():"";return e>2&&(a.tld_index=b.indexOf(f))>-1?(a.tld=f,a.name=d[e-3],a.detect_status=2):e>1&&(a.tld_index=b.indexOf(g))>-1?(a.tld=g,a.name=d[e-2],a.detect_status=2):(a.name=d[e-1],a.detect_status=1,a.tld_index=-1),c("getDomain",a),c("function_stack","getDomain",!0),a},a.getChecked2=function(b){return a.tlds.tlds[b]?a.tlds.tlds[b].checked:!0},a.getDefault=function(){var a=arguments[0],b=arguments[1];switch(a){case"category":return j();case"data":return k(b.opts,b.json,b.is_werblich);default:return!1}},a.setCheckedMulti=function(){var b=arguments[1],c=arguments[2],d=arguments[0];$.each(d,function(d,e){d<a.default_values.selected&&c?a.setChecked(e,b,c):a.setChecked(e,b)})},a.setChecked=function(){var b=arguments[0],c=arguments[1],d=b.index,e=arguments[2],f=a.tlds.category_mapping[c].sub_items[d];if(a.tlds.category_mapping[c].sub_items[d].checked=e,b.checked=f.checked,c&&b.id&&void 0!==e)a.tlds.tlds[b.id].checked[c]=e,$(window).trigger("update_checked",[b.id,c]);else if(void 0===e){var g=a.tlds.tlds[b.id].checked[c];a.tlds.tlds[b.id].checked[c]=g,a.tlds.category_mapping[c].sub_items[d].checked=g,b.checked=g,a.has_stack&&$(window).trigger("update_checked",[b.id,c])}},a.manualApply=function(){a.$apply()},a.getData=function(){var d=window.opts.package_data,e=window.opts.domain_data;d&&d.max_domain_count&&e.inclusive_tld_list&&parseInt(d.max_domain_count)===e.inclusive_tld_list.length&&(window.opts.initial_data.domain_data.field_info.TLD.field_value=e.inclusive_tld_list,window.opts.initial_data.domain_data.field_info.TLD.category_mapping={DEFAULT:{tlds:e.inclusive_tld_list,name:"DEFAULT",tags:[]}},window.opts.initial_data.domain_data.field_info.TLD.category_groups=[{DEFAULT_001:{name:"DEFAULT",categories:["DEFAULT"],tags:[]}}],window.opts.pre_set_data.tlds=["DEFAULT"],a.no_categories=!0),c("function_stack","getData",!0),a.tests.scope=a;var f=window.opts,g=!1;!f&&portal_config&&portal_config.tld?(g=!0,b({method:"GET",url:"//www.strato."+portal_config.tld+"/orca/domain_name_validation/get_validation_data_by_context/"+portal_config.orca}).success(function(b){f=a.getDefault("data",{opts:f,json:b,is_werblich:g})}).error(function(c){b({method:"GET",url:"/_assets_"+portal_config.tld+"/module/domainchecker/fallback.json"}).success(function(b){f=a.getDefault("data",{opts:f,json:b,is_werblich:g})})})):f&&!f.initial_data?(g=!1,b({method:"GET",url:"/orca/domain_name_validation/get_validation_data_by_context/"+f.config_data.mandator+"/"+f.config_data.country+"/"}).success(function(a){f.initial_data=a,i(f)}).error(function(a){b({method:"GET",url:"/global_static/js/Domainsuche/fallback.json"}).success(function(a){f=a,i(f)})})):f?i(f):(g=!1,b({method:"GET",url:"/global_static/js/Domainsuche/fallback.json"}).success(function(a){f=a,i(f)}).error(function(a){}))}}]),window.smoothScroll=function(){if(void 0!==document.querySelectorAll&&void 0!==window.pageYOffset&&void 0!==history.pushState){var a=function(a){return"HTML"===a.nodeName?-window.pageYOffset:a.getBoundingClientRect().top+window.pageYOffset},b=function(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},c=function(a,c,d,e){return d>e?c:a+(c-a)*b(d/e)},d=function(b,d,e){d=d||500;var f=window.pageYOffset;if("number"==typeof b)var g=parseInt(b);else var g=a(b);var h=Date.now(),i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(a){window.setTimeout(a,15)},j=function(){var a=Date.now()-h;window.scroll(0,c(f,g,a,d)),a>d?"function"==typeof e&&e(b):i(j)};j()},e=function(a){a.preventDefault(),location.hash!==this.hash&&window.history.pushState(null,null,this.hash),d(document.getElementById(this.hash.substring(1)),500,function(a){location.replace("#"+a.id)})};return document.addEventListener("DOMContentLoaded",function(){for(var a,b=document.querySelectorAll('a[href^="#"]'),c=b.length;a=b[--c];)a.addEventListener("click",e,!1)}),d}}(),function(a,b,c){function d(){backToSearchButton=b("<a/>",{"class":"backTo_searchButton",html:backTo_searchButtonText+"&nbsp"}).append(b("<i/>",{"class":"icon-arrow-up"})),$_footer.append(backToSearchButton),b(backToSearchButton).bind("click",a.goBackToTop)}function e(){var a=a=null,c=b("#selector").children(),d=b(c).text();b(c).data(),b(".switch_more_tlds").children().text();totallyStickyOffset=l(a),s&&(-1==d.indexOf("Top 10")||-1==d.indexOf("neue"))&&(totallyStickyOffset+=100,b(document).scrollTop(totallyStickyOffset-140))}function f(){var c=b(".domainselectbox").children()[0],d=b(c).children()[1],e=b(d).children();c=b(".domainselectbox").children()[1],d=b(c).children()[1],e.push.apply(e,b(d).children()),b(e).bind("click",function(){var c=$_domain_search_input.height()+28;s?(totallyStickyOffset=l(c),H>bottomScrollBorder?b(document).scrollTop(totallyStickyOffset-100):a.goBackToTop()):totallyStickyOffset=l()})}function g(a){var b="totally_sticked_domainSearch";("add"===a||"remove"===a)&&$_domain_search_input.toggleClass(b,"add"===a)}function h(){var c=null,d=null;r=b(this).scrollTop(),z=j(),"block"===$_result_container.css("display")&&(s?s&&(d=$_domain_search_input.hasClass("totally_sticked_domainSearch"),r>=totallyStickyOffset&&d===!1&&g("add"),r<totallyStickyOffset&&d===!0&&g("remove"),!domainSearchIsHidden&&H<=bottomScrollBorder?i("hide"):domainSearchIsHidden&&z>bottomScrollBorder&&i("show")):r>=q&&(c="set"),s&&q>r&&(c="reset"),m(c),n(c),a.setNotepadHeight())}function i(a){switch(a){case"hide":x.addClass("Domainsuche_hidden"),$_header.addClass("hiddenDomainsearch_header"),b(backToSearchButton).show(),domainSearchIsHidden=!0;break;case"show":x.removeClass("Domainsuche_hidden"),$_header.removeClass("hiddenDomainsearch_header"),b(backToSearchButton).hide(),domainSearchIsHidden=!1}}function j(){return z=b("#Domainsuche_rahmen").offset().top+b("#Domainsuche_rahmen").height()-r+C+5}function k(){var a=b("#Domainsuche_rahmen").offset().top,c=b("#Domainsuche_rahmen").height(),d=b("#notepad_head").height(),e=parseInt(b("#notepad").css("margin-top"),10),f=b("#notepad_Hauptartikel").height(),g=parseInt(b("#notepad_Hauptartikel").css("padding-bottom"),10),h=a+c-r-d-e;return 0!==t&&(h-=f+g),h}function l(a){return a||(a=totallyStickyVariance),totallyStickyOffset=b(".bottom_control").offset().top-a,totallyStickyOffset}function m(a){switch(a){case"set":w.addClass("fixed_domain_search"),y.addClass("notepad_area_fixed"),A.addClass("domainselectbox_stickedDomainsearch"),B.addClass("flyout_stickedDomainsearch"),s=!0,q-=E;break;case"reset":w.removeClass("fixed_domain_search"),y.removeClass("notepad_area_fixed"),A.removeClass("domainselectbox_stickedDomainsearch"),B.removeClass("flyout_stickedDomainsearch"),s=!1,q+=E,v.css("bottom",""),y.css("height",""),$_shader.hide()}}function n(a){switch(a){case"set":w.animate({"padding-top":C+"px"},250);break;case"reset":w.css("padding-top",D+"px")}}function o(){var a=window.navigator.userAgent,b=a.indexOf("MSIE"),c=a.indexOf("Trident"),d=a.indexOf("Edge"),e=a.indexOf("Firefox"),f=a.indexOf("Chrome");D=parseInt(w.css("padding-top"),10),b>0||c>0||d>0?(userAgent="IE",E=75,C=38,totallyStickyVariance=188):e>0?(userAgent="Firefox",E=20,C=93,totallyStickyVariance=135):f>0&&(userAgent="Chrome",E=80,C=30,totallyStickyVariance=187)}var p,q=300,r=null,s=!1,t=0,u=null,v=null,w=null,x=null,y=null,z=null,A=null,B=null,C=null,D=null,E=null,F=null,G=null,H=null,I=null,J=null;shaderOffsetTop=4,variance=null,totallyStickyVariance=null,totallyStickyOffset=565,bottomScrollBorder=70,domainSearchIsHidden=!1,$_footer=null,$_header=null,backTo_searchButton=null,backTo_searchButtonText=null,$_shader=null,$_result_container=null,noDomainselectBtnClone=null,noChosenDomains=null,a.init=function(){var c=b("#domain_search_submit");w=b(".domain_search"),x=b("#Domainsuche_rahmen"),$_domain_search_input=b("#Domainsuche_search_input"),y=b("#notepad_area"),p=b("#notepad_head"),u=b("#notepad_foot"),v=b("#notepad_Domains"),A=b(".domainselectbox"),B=b(".flyout"),$_footer=b("footer"),$_header=b("header"),$_shader=b("#shader"),$_result_container=b("#result_container_css"),F=document.getElementById("notepad_Hauptartikel"),null!==F?(G=b(F),t=p.height(),shaderOffsetTop+=t,noDomainselectBtnClone=b("#noDomainselectBtnClone"),0===noChosenDomains&&"1"!==domain_required&&a.handleNoDomainselectBtn("show")):b("#notepad_foot").addClass("notepad__foot--withoutProduct"),b(document).bind("scroll",h),o(),totallyStickyOffset=l(),b(".switch_more_tlds").bind("click",e),f(),c.bind("click",function(){window.smoothScroll(totallyStickyOffset,350)}),d(),window.smoothScroll(q,550)},a.createNoDomainselectBtnClone=function(){var a=b("<button/>",{id:"noDomainselectBtnClone"}),c=b("#button_no_domain_select").html();b(a).append(c),b("#notepad_area").append(a),b(a).bind("click",function(){b("#button_no_domain_select").trigger("click")})},a.handleNoDomainselectBtn=function(a){switch(a){case"show":b(noDomainselectBtnClone).addClass("noDomainselectBtnClone--shown");break;case"hide":b(noDomainselectBtnClone).removeClass("noDomainselectBtnClone--shown")}},a.goBackToTop=function(){m("reset"),x.removeClass("Domainsuche_hidden"),$_header.removeClass("hiddenDomainsearch_header"),$_footer.removeClass("hiddenDomainsearch_footer"),b(backToSearchButton).hide(),domainSearchIsHidden=!1,$_domain_search_input.removeClass("totally_sticked_domainSearch"),b(document).scrollTop(q)},a.setEffectiveHeight=function(){I=b("#notepad_Domains").height()},a.setNotepadHeight=function(){H=k(),z=j(),a.setEffectiveHeight(),s===!0&&(I>=H?(J=I-H,v.css("bottom",J),u.css("margin-bottom",""),$_shader.show()):H>=I&&(v.css("bottom",""),u.css("margin-bottom","12px"),$_shader.hide()),y.height(z))},a.setTextAssets=function(a){backTo_searchButtonText=a.domains.back_to_search},a.set_noChosenDomains=function(a){noChosenDomains=a}}(window.sticky_domainsearch=window.sticky_domainsearch||{},jQuery),$(document).ready(function(){window.smoothScroll(195,350),setTimeout(function(){sticky_domainsearch.createNoDomainselectBtnClone(),sticky_domainsearch.init()},2500),strato.domainsearch.searchresult.addOnReadyFn(function(){sticky_domainsearch.setNotepadHeight();var a=$(document).scrollTop(),b=$("#suggestions"),c=b.height();domainSearchIsHidden===!0&&c>0&&(a+=c/2,$(document).scrollTop(a))}),strato.domainsearch.notepad.addOnReadyFn(function(){sticky_domainsearch.setNotepadHeight()})});